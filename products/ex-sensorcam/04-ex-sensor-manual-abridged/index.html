
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Initial testing of MkDocs for DCC-EX documentation">
      
      
      
        <link rel="canonical" href="https://dcc-ex.com/mkdocs-test/products/ex-sensorcam/04-ex-sensor-manual-abridged/">
      
      
        <link rel="prev" href="../03-ex-sensorcam-command-reference/">
      
      
        <link rel="next" href="../../../purchasing/01-official-sellers/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../../_static/images/logos/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>EX-SensorCAM Abridged Manual - DCC-EX Model Train Control, Animation, and Automation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../_static/css/dccex_theme.css">
    
      <link rel="stylesheet" href="../../../css/open_in_new_tab.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="dccex-light" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ex-sensorcam-abridged-manual" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="DCC-EX Model Train Control, Animation, and Automation" class="md-header__button md-logo" aria-label="DCC-EX Model Train Control, Animation, and Automation" data-md-component="logo">
      
  <img src="../../../_static/images/logos/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DCC-EX Model Train Control, Animation, and Automation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              EX-SensorCAM Abridged Manual
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="dccex-light" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="dccex-dark" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/DCC-EX/mkdocs-test" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../00-products/" class="md-tabs__link">
          
  
  
    
  
  Products

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../purchasing/01-official-sellers/" class="md-tabs__link">
          
  
  
    
  
  Purchasing

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../installer/00-overview/" class="md-tabs__link">
          
  
  
    
  
  Installing

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../diy/00-diy/" class="md-tabs__link">
          
  
  
    
  
  Self Build

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../throttles/00-throttles/" class="md-tabs__link">
          
  
  
    
  
  Throttles

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../news/" class="md-tabs__link">
          
  
  
    
  
  News

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../support/00-faq/" class="md-tabs__link">
          
  
  
    
  
  Support

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../donations/00-donations/" class="md-tabs__link">
          
  
  
    
  
  Donations

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../reference/00-serial-commands/" class="md-tabs__link">
          
  
  
    
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../about/00-about/" class="md-tabs__link">
          
  
  
    
  
  About Us

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../contributing/00-contributing/" class="md-tabs__link">
          
  
  
    
  
  Contributing

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="DCC-EX Model Train Control, Animation, and Automation" class="md-nav__button md-logo" aria-label="DCC-EX Model Train Control, Animation, and Automation" data-md-component="logo">
      
  <img src="../../../_static/images/logos/logo.png" alt="logo">

    </a>
    DCC-EX Model Train Control, Animation, and Automation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/DCC-EX/mkdocs-test" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Products
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Products
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-products/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Product List
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01-getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    EX-CommandStation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            EX-CommandStation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/00-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The DCC-EX Command Station
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/01-ex-csb1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EX-CSB1 CommandStation Booster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/05-config-h/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build time config.h
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/10-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing your command station
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_5" id="__nav_2_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    TrackManager
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_5">
            <span class="md-nav__icon md-icon"></span>
            TrackManager
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/trackmanager/00-trackmanager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TrackManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/trackmanager/01-booster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EX-CSB1 in DCC Booster Mode
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_6" id="__nav_2_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Accesssories
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_6">
            <span class="md-nav__icon md-icon"></span>
            Accesssories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/accessories/00-accessories/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connecting Accessories
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/accessories/20-actuators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Actuators - to make stuff happen
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/accessories/30-sensors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sensors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/accessories/50-connecting-servo-turnout/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connecting a servo turnout
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/accessories/60-hardware-list/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hardware device list
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/accessories/88-i2c-intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    I2C â€“ An Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/accessories/90-buying-i2c-devices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Buying I2C devices
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_6_8" >
        
          
          <label class="md-nav__link" for="__nav_2_3_6_8" id="__nav_2_3_6_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Various devices
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_6_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_6_8">
            <span class="md-nav__icon md-icon"></span>
            Various devices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/accessories/various-devices/00-ds1307/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DS1307 Real Time clock chip
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_7" >
        
          
          <label class="md-nav__link" for="__nav_2_3_7" id="__nav_2_3_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    EXRAIL
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_7">
            <span class="md-nav__icon md-icon"></span>
            EXRAIL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/01-exrail/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    What is EXRAIL?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/02-autostart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Things that happen at startup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/09-command-list/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EXRAIL Command List
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_7_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_7_4" id="__nav_2_3_7_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cookbooks
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_7_4">
            <span class="md-nav__icon md-icon"></span>
            Cookbooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/01-vpins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virtual Bitmap device pins (VPINs)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/animation-sensors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Buttons and Switches
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/dc-tracks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Set a track to DC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/estop-button/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Emergency stop button
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/flashing-signals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Signals with flashing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/roster-similar-locos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Roster for Similar Sound Locos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/route-button-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Route button control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/startup-poweron/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Startup power
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/startup-set-track/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Startup - Define Tracks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/timecontrol/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Time Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_7_4_11" >
        
          
          <label class="md-nav__link" for="__nav_2_3_7_4_11" id="__nav_2_3_7_4_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Advanced
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_3_7_4_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_7_4_11">
            <span class="md-nav__icon md-icon"></span>
            Advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/advanced/5-display-locos-on-oled/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Display Loco speeds on OLED (Advanced)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/advanced/analog-sensors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Analog sensors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/advanced/command-filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command Filters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/advanced/passing-locos-between-sequences/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Passing locos between sequences
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/advanced/tca8418-keyboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TCA8418 keyboard scanner
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_7_4_12" >
        
          
          <label class="md-nav__link" for="__nav_2_3_7_4_12" id="__nav_2_3_7_4_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Driving trains
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_3_7_4_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_7_4_12">
            <span class="md-nav__icon md-icon"></span>
            Driving trains
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/driving-trains/1-basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic driving functions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/driving-trains/3-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Loco Functions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/driving-trains/30-automations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AUTOMATIONS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/driving-trains/40-simple-shuttle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simple shuttle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/driving-trains/41-improved-shuttle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Improved shuttle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/driving-trains/45-passing-loop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Passing loop shuttle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/driving-trains/46-save-restore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Saving and Restoring speeds
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/driving-trains/50-random-selection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Random selection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/driving-trains/80-consists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Consists
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/driving-trains/90-advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Controlling trains and decoders directly
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_7_4_13" >
        
          
          <label class="md-nav__link" for="__nav_2_3_7_4_13" id="__nav_2_3_7_4_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Editing tricks
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_3_7_4_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_7_4_13">
            <span class="md-nav__icon md-icon"></span>
            Editing tricks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/editing-tricks/multi-files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multiple Files in EXRAIL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/editing-tricks/multiple-command-stations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Maintaining multiple command stations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/editing-tricks/naming-a-sequence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Naming sequences for easy commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/editing-tricks/using-call-return/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using CALL and RETURN
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/editing-tricks/using-macros/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using C++ Macros
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_7_4_14" >
        
          
          <label class="md-nav__link" for="__nav_2_3_7_4_14" id="__nav_2_3_7_4_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Flags and latches
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_3_7_4_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_7_4_14">
            <span class="md-nav__icon md-icon"></span>
            Flags and latches
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/flags-and-latches/flags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flags, Counters and Bitmaps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/flags-and-latches/latches/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Latches
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/flags-and-latches/stash/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using STASH to remember where locos are parked
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_7_4_15" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ex-commandstation/exrail/cookbooks/neopixels/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Neopixels
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3_7_4_15" id="__nav_2_3_7_4_15_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_3_7_4_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_7_4_15">
            <span class="md-nav__icon md-icon"></span>
            Neopixels
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/neopixels/neopixels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setting neopixels
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/neopixels/signals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Neopixel signals
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_7_4_16" >
        
          
          <label class="md-nav__link" for="__nav_2_3_7_4_16" id="__nav_2_3_7_4_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Turnouts
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_3_7_4_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_7_4_16">
            <span class="md-nav__icon md-icon"></span>
            Turnouts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/turnouts/02-defining-dcc-turnouts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Defining DCC turnouts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/turnouts/03-defining-pin-turnouts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Defining PIN turnouts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/turnouts/04-defining-servo-turnouts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Defining Servo turnouts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/turnouts/11-facing-turnouts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Facing turnouts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/turnouts/12-animated-turnouts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Animated turnouts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/turnouts/13-toggle-with-button/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Toggle turnouts with button or sensor
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_7_4_17" >
        
          
          <label class="md-nav__link" for="__nav_2_3_7_4_17" id="__nav_2_3_7_4_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Various devices
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_3_7_4_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_7_4_17">
            <span class="md-nav__icon md-icon"></span>
            Various devices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/various-devices/duinoNodes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lew's Duino Gear boards
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/various-devices/tm-1638/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TM1638 Buttons, leds and 7 segment display
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-commandstation/exrail/cookbooks/various-devices/trainbrains/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trainbrains Devices
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    EX-MotorShield8874
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            EX-MotorShield8874
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-motorshield8874/00-ex-motorshield8874/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EXâ€‘MotorShield8874
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    EX-WiFiShield8266
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            EX-WiFiShield8266
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-wifishield8266/00-ex-wifishield8266/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EX-WiFiShield8266
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    EX-FastClock
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            EX-FastClock
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-fastclock/01-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EX-FastClock
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-fastclock/02-hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hardware
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-fastclock/04-calibration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Calibration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-fastclock/05-installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-fastclock/06-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-fastclock/10-operation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Operation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-fastclock/15-timecontrol/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Time Control
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    EX-IOExpander
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            EX-IOExpander
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-ioexpander/00-ex-ioexpander/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EX-IOExpander
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    EX-Turntable
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            EX-Turntable
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ex-turntable/00-ex-turntable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EX-Turntable
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" checked>
        
          
          <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    EX-SensorCAM
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            EX-SensorCAM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../00-ex-sensorcam/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EX-SensorCAM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-installation-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-ex-sensor-manual/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EX-SensorCAM Manual
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-ex-sensorcam-command-reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Native EX-SensorCAM Command List
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    EX-SensorCAM Abridged Manual
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    EX-SensorCAM Abridged Manual
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#contents" class="md-nav__link">
    <span class="md-ellipsis">
      CONTENTS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix" class="md-nav__link">
    <span class="md-ellipsis">
      Appendix
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-overview" class="md-nav__link">
    <span class="md-ellipsis">
      1. Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-esp32-cam" class="md-nav__link">
    <span class="md-ellipsis">
      2. ESP32-CAM
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-physical-installation" class="md-nav__link">
    <span class="md-ellipsis">
      3. Physical Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-notation-help-commands" class="md-nav__link">
    <span class="md-ellipsis">
      4. Notation\&amp; Help commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Notation\&amp; Help commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-notation" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 Notation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-help-commands" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Help commands
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      5. Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-plan-a-grand-sensor-numbering-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Plan a grand sensor numbering strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-preset-the-wifi-ssid-and-password" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 Preset the wifi SSID and password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-adjust-other-configcamh-settings" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 Adjust other configCAM.h settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-load-sensorcam-software" class="md-nav__link">
    <span class="md-ellipsis">
      5.4 Load sensorCAM software
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55-establish-a-monitor-screen-to-sensorcam" class="md-nav__link">
    <span class="md-ellipsis">
      5.5 Establish a monitor screen to sensorCAM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#56-verify-wifi-webcam-operation" class="md-nav__link">
    <span class="md-ellipsis">
      5.6 Verify wifi webCAM operation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#57-familiarise-with-sensorcam-command-set" class="md-nav__link">
    <span class="md-ellipsis">
      5.7 Familiarise with sensorCAM command set.
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#58-sensor-placement" class="md-nav__link">
    <span class="md-ellipsis">
      5.8 Sensor placement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#59-sensor-status-and-save" class="md-nav__link">
    <span class="md-ellipsis">
      5.9 Sensor status and save
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#510-set-a-sensor-threshold" class="md-nav__link">
    <span class="md-ellipsis">
      5.10 Set a Sensor Threshold
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#511-limit-printout-to-manageable-range" class="md-nav__link">
    <span class="md-ellipsis">
      5.11 Limit printout to manageable range
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#512-led-bank-trip-indicator-eprom" class="md-nav__link">
    <span class="md-ellipsis">
      5.12 LED bank trip indicator &amp; EPROM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#513-sensor-reference-image-refreshing" class="md-nav__link">
    <span class="md-ellipsis">
      5.13 Sensor reference image refreshing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#514-scrolling-data-interpretation" class="md-nav__link">
    <span class="md-ellipsis">
      5.14 Scrolling data interpretation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#515-second-opinions-twin" class="md-nav__link">
    <span class="md-ellipsis">
      5.15 Second opinions (Twin)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#516-other-diagnostic-commands" class="md-nav__link">
    <span class="md-ellipsis">
      5.16 Other diagnostic commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#517-pvtthresholds-sensor-size" class="md-nav__link">
    <span class="md-ellipsis">
      5.17 pvtThresholds &amp; sensor size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-processing4-monitorconsole" class="md-nav__link">
    <span class="md-ellipsis">
      6 PROCESSING4 monitor/console
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6 PROCESSING4 monitor/console">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#processing4-command-summary" class="md-nav__link">
    <span class="md-ellipsis">
      PROCESSING4 command summary:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-wiring-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      7 Wiring Requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-communication-and-host-operation" class="md-nav__link">
    <span class="md-ellipsis">
      8 Communication and Host Operation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8 Communication and Host Operation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-intro" class="md-nav__link">
    <span class="md-ellipsis">
      8.1 Intro
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-dcc-ex-command-station" class="md-nav__link">
    <span class="md-ellipsis">
      8.2 DCC-EX Command Station
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#83-non-dcc-ex-system" class="md-nav__link">
    <span class="md-ellipsis">
      8.3 Non-DCC-EX system
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#84-monitor-lighting" class="md-nav__link">
    <span class="md-ellipsis">
      8.4 Monitor Lighting
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-a" class="md-nav__link">
    <span class="md-ellipsis">
      APPENDIX A
    </span>
  </a>
  
    <nav class="md-nav" aria-label="APPENDIX A">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#esp32-sensorcam-command-summary" class="md-nav__link">
    <span class="md-ellipsis">
      ESP32 sensorCAM Command Summary
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ESP32 sensorCAM Command Summary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commands-below-are-received-over-the-usb-or-i2c-interfaces__" class="md-nav__link">
    <span class="md-ellipsis">
      Commands below are received over the USB or i2c interfaces.__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#startup-notes" class="md-nav__link">
    <span class="md-ellipsis">
      Startup Notes:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#i2c-command-notesex-cs-may-exhibit-small-variations-reduced-cmd-functionality-depending-on-driver" class="md-nav__link">
    <span class="md-ellipsis">
      I2C command Notes:(EX-CS may exhibit small variations&amp; reduced cmd functionality depending on driver)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-b" class="md-nav__link">
    <span class="md-ellipsis">
      APPENDIX B
    </span>
  </a>
  
    <nav class="md-nav" aria-label="APPENDIX B">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-list-for-optimising-sensor-response" class="md-nav__link">
    <span class="md-ellipsis">
      Check List for Optimising Sensor Response
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-c" class="md-nav__link">
    <span class="md-ellipsis">
      APPENDIX C
    </span>
  </a>
  
    <nav class="md-nav" aria-label="APPENDIX C">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parsed-dcc-ex-cs-sensorcam-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Parsed DCC EX-CS sensorCAM commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-commands" class="md-nav__link">
    <span class="md-ellipsis">
      User commands
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-e" class="md-nav__link">
    <span class="md-ellipsis">
      APPENDIX E
    </span>
  </a>
  
    <nav class="md-nav" aria-label="APPENDIX E">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tabulation-of-recommended-dcc-ex-cs-ids-for-sensorcam" class="md-nav__link">
    <span class="md-ellipsis">
      Tabulation of Recommended DCC-EX-CS ID's for sensorCAM
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-f" class="md-nav__link">
    <span class="md-ellipsis">
      APPENDIX F
    </span>
  </a>
  
    <nav class="md-nav" aria-label="APPENDIX F">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hardware-interface-notes-including-pca9515a-sparkfun-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      Hardware Interface Notes (including PCA9515A&amp; Sparkfun Endpoints)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hardware Interface Notes (including PCA9515A&amp; Sparkfun Endpoints)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-for-33v-differential-drive-5v-cs-i2c-bus" class="md-nav__link">
    <span class="md-ellipsis">
      A FOR 3.3V Differential drive 5V CS I2C BUS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-for-33v-differential-drive-33v-cs-i2c-bus" class="md-nav__link">
    <span class="md-ellipsis">
      C FOR 3.3V Differential drive 3.3V CS I2C BUS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-h" class="md-nav__link">
    <span class="md-ellipsis">
      APPENDIX H
    </span>
  </a>
  
    <nav class="md-nav" aria-label="APPENDIX H">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notes-on-use-of-ex-rail-with-sensorcam" class="md-nav__link">
    <span class="md-ellipsis">
      Notes on use of EX-RAIL with sensorCAM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-sensorvpin-numbering" class="md-nav__link">
    <span class="md-ellipsis">
      1. Sensor/vpin Numbering
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-multiple-cams" class="md-nav__link">
    <span class="md-ellipsis">
      2. Multiple Cams
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-j" class="md-nav__link">
    <span class="md-ellipsis">
      APPENDIX J
    </span>
  </a>
  
    <nav class="md-nav" aria-label="APPENDIX J">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#esp32-cam-pinout-v16-and-wrover-cam-notes" class="md-nav__link">
    <span class="md-ellipsis">
      ESP32-CAM pinout (v1.6) and WROVER-CAM notes.
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-note-on-i2c-clock-frequency" class="md-nav__link">
    <span class="md-ellipsis">
      1 Note on i2c clock frequency
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-notes-on-40-pin-wrover-cam-and-38-pin-breakout-board" class="md-nav__link">
    <span class="md-ellipsis">
      2. Notes on 40-pin WROVER CAM and 38-pin breakout board
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-note-on-enhanced-t-command-for-handlingclearing-pvtthresholds-version-v319" class="md-nav__link">
    <span class="md-ellipsis">
      3. Note on enhanced 't' command for handling/clearing pvtThresholds (version v319+):
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-random-notes" class="md-nav__link">
    <span class="md-ellipsis">
      ADDITIONAL RANDOM NOTES:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acceptable-alt-wrover-cam" class="md-nav__link">
    <span class="md-ellipsis">
      Acceptable alt. WROVER CAM
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Purchasing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Purchasing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../purchasing/01-official-sellers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Official DCC-EX Suppliers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../purchasing/02-third-party-sellers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Third Party Products and Sellers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../purchasing/03-merchandise/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DCC-EX Merchandise
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Installing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Installing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../installer/00-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using EX-Installer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../installer/01-installer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EX-Installer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../installer/02-first-run/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    First Run installer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../installer/03-select-product/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Select Product to Install
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../installer/04-install-cs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing Command Station Software
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../installer/05-platformio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced Users - VSCode/PlatformIO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../installer/download-linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Download linux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../installer/download-mac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Download mac
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../installer/download-win/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Download win
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Self Build
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Self Build
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../diy/00-diy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build Your Own Command Station
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../diy/10-power/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Selecting a power supply
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../diy/20-mega-easy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Easy build - Arduino Mega
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../diy/21-mega-harder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Alternative build - Arduino Mega
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../diy/30-nucleo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Complex Build - Nucleo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../diy/40-esp32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Complex Build - ESP32
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../diy/50-wifi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Optionally install Wifi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../diy/51-ethernet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Optionally install Ethernet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../diy/80-installer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing Command Station firmware
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../diy/90-others/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DIY - Other devices
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Throttles
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Throttles
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../throttles/00-throttles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Throttles and Other Controllers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../throttles/01-engine-driver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Engine Driver
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../throttles/02-throttlecard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ThrottleCard
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../news/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    News
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            News
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Categories
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../news/category/general-dcc-ex-news/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    General DCC-EX News
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Support
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Support
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../support/00-faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Frequently Answered Questions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../support/01-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Help and Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../support/05-discord/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The DCC-EX Discord Server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../support/10-github/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Raising GitHub Issues
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Donations
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Donations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../donations/00-donations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Donations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/00-serial-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DCC-EX Command Protocol
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/01-serial-command-basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Serial Command Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/06-advanced-config-h/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced config.h settings for Command Station build
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/07-command-station-arch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command Station Internal Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/08-throttle-writers-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Throttle Writers Guide (doc incomplete)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/50-glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    50 glossary
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/99-legacy-command-reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Legacy Command Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_8" >
        
          
          <label class="md-nav__link" for="__nav_10_8" id="__nav_10_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Esp32
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_8">
            <span class="md-nav__icon md-icon"></span>
            Esp32
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/esp32/16-esp32-ex8874/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WeMos D1 R32 + EX8874
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/esp32/18-esp32-acebott/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ACEBOTT + EX8874
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/esp32/22-esp32-l298-shield/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ESP32 + L298 Shields
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_9" >
        
          
          <label class="md-nav__link" for="__nav_10_9" id="__nav_10_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ex csb1
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_9">
            <span class="md-nav__icon md-icon"></span>
            Ex csb1
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/ex-csb1/10-csb1-errors-faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EX-CSB1 FAQ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/ex-csb1/11-csb1-technical/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EX-CSB1 Technical Reference
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_10" >
        
          
          <label class="md-nav__link" for="__nav_10_10" id="__nav_10_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Hardware
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_10">
            <span class="md-nav__icon md-icon"></span>
            Hardware
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_10_1" >
        
          
          <label class="md-nav__link" for="__nav_10_10_1" id="__nav_10_10_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Motorboards
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_10_10_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_10_1">
            <span class="md-nav__icon md-icon"></span>
            Motorboards
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/hardware/motorboards/01-l298-shields/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    L298P &amp; L298HN Shields
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/hardware/motorboards/10-schematics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Schematics
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_11" >
        
          
          <label class="md-nav__link" for="__nav_10_11" id="__nav_10_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Nucleo
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_11">
            <span class="md-nav__icon md-icon"></span>
            Nucleo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/nucleo/03-nucleo-drivers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nucleo - USB Drivers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/nucleo/04-nucleo-firmware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nucleo - STLink Firmware
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/nucleo/05-nucleo-debug/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nucleo - Debug
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/nucleo/08-nucleo-power/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nucleo - Power
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/nucleo/11-nucleo-64-ex8874/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nucleo 64 - EX8874
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/nucleo/12-nucleo-64-wifi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nucleo 64 - WiFi and Pins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/nucleo/16-nucleo-144-ex8874/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nucleo 144 - EX8874
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/nucleo/17-nucleo-144-wifi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nucleo 144 - WiFi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/nucleo/19-nucleo-144-pin-reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nucleo 144 - Pins
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_12" >
        
          
          <label class="md-nav__link" for="__nav_10_12" id="__nav_10_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Trackmanager
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_12">
            <span class="md-nav__icon md-icon"></span>
            Trackmanager
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/trackmanager/00-trackmanager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Track Manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/trackmanager/01-dc-mode-frequency/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DC Mode - PWM Frequency
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/trackmanager/02-dc-mode-logic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DC Mode - Logic Gate Circuits
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/trackmanager/03-dc-track-sync/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DC Mode Track Sync
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_13" >
        
          
          <label class="md-nav__link" for="__nav_10_13" id="__nav_10_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Wiring
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_13">
            <span class="md-nav__icon md-icon"></span>
            Wiring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_13_1" >
        
          
          <label class="md-nav__link" for="__nav_10_13_1" id="__nav_10_13_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    i2C
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_10_13_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_13_1">
            <span class="md-nav__icon md-icon"></span>
            i2C
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/wiring/i2C/00-i2c-wiring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    I2C Wiring for the Tinkerer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/wiring/i2C/04-tuning-info/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tuning an I2C Bus for the Engineer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    About Us
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            About Us
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/00-about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About the DCC-EX Project
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/00-contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How Can I Contribute?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/98-user-journeys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User Personas and Journeys - Front Page Tiles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/99-release-checklist/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release Checklist
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_4" >
        
          
          <label class="md-nav__link" for="__nav_12_4" id="__nav_12_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Code
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_4">
            <span class="md-nav__icon md-icon"></span>
            Code
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/code/00-contributing-code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing to the public domain code
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_5" >
        
          
          <label class="md-nav__link" for="__nav_12_5" id="__nav_12_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_5">
            <span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/documentation/00-docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing to Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/documentation/02-standards/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documentation Standards
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/documentation/03-formatting-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Formatting Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/documentation/04-understanding-links/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Understanding Links
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/documentation/05-logos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using Our Logos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/documentation/06-mkdocs-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Working with MkDocs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/documentation/10-mermaid-diagrams/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mermaid Diagrams
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="ex-sensorcam-abridged-manual">EX-SensorCAM Abridged Manual<a class="headerlink" href="#ex-sensorcam-abridged-manual" title="Permanent link">&para;</a></h1>
<h2 id="contents">CONTENTS<a class="headerlink" href="#contents" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Overview 1</p>
</li>
<li>
<p>ESP32-CAM 3</p>
</li>
<li>
<p>Physical Installation 5</p>
</li>
<li>
<p>Notation&amp; Help commands 7</p>
</li>
<li>
<p>Configuration 8</p>
</li>
<li>
<p>PROCESSING4 monitor/console 11</p>
</li>
<li>
<p>Wiring Requirements 13</p>
</li>
<li>
<p>Communication and Host Operation 14</p>
</li>
</ol>
<h2 id="appendix">Appendix<a class="headerlink" href="#appendix" title="Permanent link">&para;</a></h2>
<p>A. ESP32 sensorCAM Command Summary 17</p>
<p>B. Check List for Optimising Sensor Resonse 19</p>
<p>C. Filtered/parsed DCC EX-CS commands 20</p>
<p>E. Tabulation of Recommended DCC-EX-CS id's for sensorCAM 23</p>
<p>F. Hardware Interface Notes.(including PCA9515A&amp; SF Endpoints) 24</p>
<p>H. Notes on use of EX-Rail with SensorCAM 29</p>
<p>J. ESP32-CAM pinout (v1.6) and WROVER-CAM notes 31</p>
<p>Addenda 32</p>
<h2 id="1-overview">1. Overview<a class="headerlink" href="#1-overview" title="Permanent link">&para;</a></h2>
<p>The sensorCAM is a video camera replacement for physical proximity sensors/detectors on a model railroad. It can replace up to 80 detectors and their associated power and signal wiring using artificial vision alone. It offers the flexibility of sensor placement or relocation instantly by software command with no physical layout modification.The railroad can be automated using artificial vision of train activity. Each virtual sensor can produce a logical state of 1 (occupied) or 0 (unoccupied) and is readable over an i2c cable. SensorCAM uses the ESP32-CAM module. However, the ESP32-WROVER-DEV CAM(v1.6) is a preferred substitute with potentially simpler setup.</p>
<p>The sensorCAM takes 10 frames per second in RGB565 format at QVGA resolution of 240 x 320. Each sensor consists of a square group of 16 pixels which equates to approx. 20x20mm square with the standard lens at 1500mm. The software decodes and saves only the 80 sensor images (1280 pixels) and then compares each sensor image with a reference image prerecorded either at startup, on request, or by a"recent" automatic update. If the images do not match the references well then the sensor is "tripped" or "occupied" &amp; status'1' is produced. A good match results in '0' output. The state of virtual sensors can be manually monitored on the USB monitor, or polled by microcontroller over the i2c interface cable. <strong>Note:</strong> The sensorCAM is sensing only when the Flash LED is pulsing at 10Hz (for each new frame).</p>
<p><img alt="ESP32 CAM with MB" src="../../../_static/images/ex-sensorcam/esp32-cam-with-mb.png" /></p>
<p>2PCS ESP32-CAM-MB, ESP32-CAM Board, ESP32-CAM-MB Micro USB to Serial Port CH-340G with OV2640 2MP Camera Module 4MB PSRAM</p>
<p><img alt="ESP32 Wrover CAM Photo" src="../../../_static/images/ex-sensorcam/esp32-wrover-cam-photo.png" /></p>
<p><strong>Note:</strong> While this manual primarily talks about the ESP32-CAM-MB, there is a similar tested alternative in the newer <strong>ESP32 WROVER-CAM</strong> single board option. For some further preliminary details refer to Section 7 Wiring, Figure 6.  THe software is identical for both CAMs.</p>
<p>Dealing with video images involves complexities not normally associated with model railroading sensors. The sensorCAM is a complex device with a number of commands explicitly for setup and evaluation. In addition to these, several â€œoutputâ€ commands can be used by a host to interrogate the â€œvirtual sensorâ€ output states. The initial setup can be somewhat involved and requires familiarity with many of the 25 commands discussed below.</p>
<p>The sensorCAM has two <strong><em>mutually exclusive modes</em></strong> of operation; the sensorCAM mode and the webCAM mode. The webCAM mode is essentially as described in the on-line tutorials. Use that mode only for education and alignment. Invoke webCAM video mode by issuing the <strong>v1</strong> (or <strong>v2</strong>) sensorCAM command to get a webCAM URL (e.g.192.168.0.64)</p>
<p>The ESP32-CAM does not have a USB port so you will need an FTDI interface or <strong>MB</strong>. We prefer the ESP32-CAM-MB(MotherBoard) interface which plugs directly behind the CAM. Checkâ€œThe Workshopâ€ You tube videos on-line for guidance. The WROVER-CAM has USB integrated.  The WROVER or MB is far simpler to use than a separate FTDI used in the videos.</p>
<p>The ESPRESSIF guide will show how to install the Arduino-ESP32 support. BE WARNED: using an FTDI(rather than MB) that has a jumper set to 5V and connecting it to the CAM 3V3 pin will destroy the ESP32-CAM. Many have died.</p>
<p><a href="https://espressif-docs.readthedocs-hosted.com/projects/arduino-esp32/en/latest/installing.html#installing-using-arduino-ide">Installing Arduino-ESP32 2.0.6 documentation (readthedocs-hosted.com)</a></p>
<p>A tutorial on setting up the ESP32 on Arduino IDE is available on YouTube called <a href="https://www.bing.com/videos/search?q=ESP32+CAM+-+10+Dollar+Camera+for+loT+Projects+-+YouTube&amp;view=detail&amp;mid=77BF6363644D71DF685B77BF6363644D71DF685B&amp;FORM=VIRE">ESP32 CAM-10 Dollar Camera for IoT Projects</a></p>
<p><a href="https://www.youtube.com/watch?v=xPINTk3VLQ">Introduction to ESP32- Getting Started</a></p>
<p>The sensorCAM software is uploaded to the ESP32-CAM using the Arduino IDE. The sensorCAM has been programmed with two modes of operation; a webCAM mode (as in the on-line tutorial) and a sensorCAM mode. The limited power of an ESP32 prevents both functioning at the same time. Consequently, to see an image of the railway while sensorCAM is operational requires a third application (Processing 4.3) to retrieve a still image from the CAM over the USB cable to a computer. The Processing 4 <em>sensorCAM.pde</em> app replaces the Arduino IDE and IDE monitor retaining the sensorCAM command set and offering a (slow) image capture capability over USB cable. Processing 4 allows virtual sensors to be placed interactively on an image of the railway with a simple mouse click.</p>
<p>In addition to the USB interface, you are likely to need a daughter board â€œcarrierâ€ or prototyping board to connect to the real world (power, indicators, control wires, and i2c.) Further details are given below. However to test the sensorCAM functions, one only needs the CAM and a USB interface, with power from the PC's USB port.</p>
<p>To control a railway, the railway needs a microcontroller based management system. This typically could be an Arduino Mega (or CSB1) based system running software such as the DCC-EX CommandStation and EX-RAIL automation application. The EX Command Station(CS) includes a sensorCAM specific driver as detailed later.</p>
<p>The lens system on the cam comes in (std) 66deg., 120 and 160deg. field of view. One can get longer ribbon versions and even 850nm(IR) versions to experiment with. These versions may be sourced independently of the ESP32-CAM.  A wider coverage is possible with a 75-120deg (fish eye) lens, if needing to accommodate a lower ceiling height but are a last resort.</p>
<h2 id="2-esp32-cam">2. ESP32-CAM<a class="headerlink" href="#2-esp32-cam" title="Permanent link">&para;</a></h2>
<p>The heart of the sensorCAM is the ESP32 CAM module with an ov2640 camera sensor and a 32bit ESP32-S microprocessor. The sensorCAM software/sketch is loaded into the ESP32 using the Arduino IDE over a USB port with settings newline/115200 baud. Follow the above guidelines and run the camera example first, to get a demo webserver and CAM operational with a simple coloured test image. Experiment with settings to "get a feel" for the parameter effects which need optimization. The CAM has a considerable number of video related on-screen settings. Alternative ov2640 CAM Modules can be obtained with various viewing angles (66,75,120,130deg) if std.(66?) is too low. Aâ€œfish eyeâ€ lens(120deg.) will give barrel distortion and small features, but the sensorCAM may still function acceptably.  The standard ov2640 can see some Infra Red light which may be utilised to see a bright IR LED as a beam-break sensor.</p>
<p><img alt="ESP32 CAM Example Sketch" src="../../../_static/images/ex-sensorcam/esp32-cam-example-sketch.png" /></p>
<p><strong>Figure 1. &nbsp; webCAM mode</strong></p>
<p>Figure 1. is an example of the standard webCAM browser presentation. It is a very useful mode for alignment and as a training aid in investigating the effects of the many video adjustments possible, but does not allow placement of sensors as sensorCAM mode can't be simultaneously enabled.</p>
<p>Brightness, Contrast, Saturation, AutoWhiteBalance(AWB), AWBgain, AutomaticExposureCtl(AEC), AECdsp, AELevel, AutomaticGainCtl(AGC), AGGainCeiling and more can be adjusted.  The sensorCAM uses QVGA but VGA is better in webCAM mode. These settings can be changed after the CAM images are stable, but the default values should be adequate.</p>
<p>If you â€œStart Streamâ€, parameter changes will seem almost immediate. But with â€œstillsâ€, after changing a variable, you may have to click â€œGet Stillâ€ 3 times to clear the pipeline and get a changed image. In Stream mode, close observation will reveal changing whole image brightness/colour for several seconds after image disturbance (e.g. a hand in front of CAM) as the auto adjustments â€œcorrectâ€ the image. These types of changes can trip the sensorCAM even if the obstruction does not block the virtual sensor. Consequently after power-up, the sensorCAM may stabilize and then turn off some auto adjustments in the first 15 seconds. Changing environment lighting may result in a need to use a â€œrecalibrateâ€ command, for example perhaps after sunset or turning on extra lighting.</p>
<p>Due to the slowness of the ESP32 &amp; wifi, the "live stream" is slow and a webCAM delay in response will be observed. This may be a little quicker for the sensorCAM sensing mode. The delay is inevitable in webCAM WiFi mode.</p>
<p><img alt="ESP32 CAM Example Capture Sample" src="../../../_static/images/ex-sensorcam/esp32-cam-example-capture-sample.png" /></p>
<p><strong>Figure 2 &nbsp; Initial sensorCAM settings</strong></p>
<p>After the sensorCAM has booted up, it reads frames for 9 seconds before automatically doing a reference grab for all defined sensors (the r00 command). </p>
<p>The ESP32-CAM has an Infra-Red(IR) filter to enhance colour response. The sensorCAM relies on strong colour contrast(saturation) to detect changes. Low lighting levels and poor contrast degrades performance.</p>
<p>To run the sensorCAM.ino, it will be necessary to configure the Arduino IDE for the ESP32 as covered in the above you-tube tutorial links. Load and run the demonstration. For the sensorCAM, you will require new files as described in the sensorCAM installation Guide. </p>
<p>The ESP32-CAM can take rgb565 frames at 13/second. However it is a 3 step process; image sensing, processing and storing. It will then take further cycles to assess the state of the 80 virtual sensors in the frame(another two cycles) A total of 5 cycles places a significant limit on the sensorCAM speed of response time (up to 0.5 seconds at 10 frames/second). A fast HO loco can travel 160mm @ 100kph, so this latency might need to be accommodated in planning virtual sensor locations.</p>
<h2 id="3-physical-installation">3. Physical Installation<a class="headerlink" href="#3-physical-installation" title="Permanent link">&para;</a></h2>
<p>For testing purposes you will need a computer with a spare USB port and the Arduino IDE software installed. The PROCESSING 4 software is also advisable as it gives a more reliable and convenient image for setup. A long powered USB cable (5m?) may be an advantage as the sensorCAM may be some distance from the PC. For a final installation the sensorCAM would be connected via a cat5/6 cable carrying power and a differential i2c bus (of up to 30m) to a Command Station or similar. Some different practical wiring solutions are explored in Appendix F.</p>
<p>For a test hookup between a USB powered sensorCAM and a Command Station(mega) with a short existing i2c bus,provided the total length is under say 3 meters, a simple, cheap arrangement could be tried using a PCA9515A buffer and level shifter. It requires soldering 5 wires to the underside of the MB USB interface. This improvisation is not an idealâ€œuniversalâ€ arrangement. The PCA9515A is mounted on 1/16â€ thick double-sided adhesive foam mounting tape. The CAM on i2c bus is best used theoretically with the USB computer running on battery power alone(unplugged) to absolutely avoid ground loops and associated electrical noise, but will probably function OK anyway.</p>
<p><img alt="ESP32 CAM with PCA9515A and LTC4311" src="../../../_static/images/ex-sensorcam/esp32-cam-pca9515a-ltc4311.png" /></p>
<p><strong>Figure 3 &nbsp; CAM with 3.3 to 5V i2c interface and optional LTC4311 â€œterminatorâ€ for greater reach</strong></p>
<p>The sensorCAM is preferably placed above and square-on to a section of layout at a height of 1 to 1.8m above the surface. 1.2m gives a max. coverage of approximately 1.2x0.9m with the standard lens. Tilting the CAM by up to 30 degrees can increase the layout coverage by up to 50%. Another arrangement with several advantages is to place the CAM near the surface so as to view the surface via some good mirror tiles placed on the ceiling, positioned to ensure coverage of the desired sensor locations. This may increase coverage, especially if multiple mirrors are at slight angles. The mirror arrangement with benchtop level mount allows for wider coverage with low ceilings, and also places the CAM in a more accessible spot for wiring and maintenance. Mirror tiles do not need to be perfectly flat, some image distortion is acceptable, but they must be stable. Oblique camera angles may also be used to advantage, but sensor location and tripping point may be compromised somewhat.</p>
<p>Lighting is critical for reliable operation. The lighting should be steady. Both LED flood and Fluorescent lighting might degrade results due to the flickering levels of illumination at 100/120 Hz. Use quality LED lights. The light fittings should not be visible in the camera's field of view. A uniform level of lighting is the objective, with a minimum influence from fluctuating daylight, fans and cloud shadows through windows. Some experimentation may be needed to avoid local â€œglareâ€.  Images may show white test panels to have several drifting horizontal dull bands produced between cycles of the mains supply (Figure 4). Bright lighting is desirable (good quality LEDS) to enhance colour differentiation. Check your lighting for flicker by taking a â€œslo-moâ€ test video on a cell phone. Fluoro's are bad!</p>
<p>The mount needs to be rigid to avoid vibration which can trip sensors due to small image movements. It also needs to have a suitable route for a (cat5) cable for its own power supply and the necessary i2c communications. The length of this cable needs to be considered if the railway's i2c network is otherwise long. The quick connection above (using PCA9515A) is for short lengths only (i2c under 3m). Up to 7m may be achieved using 2k pull-up resistance and one LTC4311 â€œterminatorâ€ to enhance signal rise time.  The recommended alternative for longer cables is the Sparkfun differential Endpoint system.  Power needs to be regulated near the remote sensorCAM if not using a short USB cable.</p>
<p>Most reliable results may be obtained with light grey coloured ballast and darker sleepers. If results are inadequate, light green (grass?) or yellow "reflectors" between the rails may relieve any problem (recommended in fiddle yards). If lighting throws shadows beside senssed rolling stock, the shadows may be used advantageously by good sensor placement.</p>
<p>For initial configuration, access to the sensorCAM's USB port is important. Loading computer code over a long USB cable is problematic, but monitoring and tweaking settings may be done with a reduced BAUD rate or a (5m?) buffered USB cable at 115200 BAUD.</p>
<p>With regards lighting, fluoroescent or LED lighting normally flickers at twice mains frequency so it pulses at 100 or 120Hz. Tolerable to humans, but it can be seen in a sensorCAM image on a uniformly white test panel as below (Figure 5). In 100mSec there could be up to 10 bands in one image. SensorCAM needs to synchronise with the mains frequency, but if it fails the faint bands will drift across the sensors and potentially trip them in the worst case scenario. Set the threshold high enough to avoid such trips or (better) change lighting. Figure 4 shows an example of bad 100Hz banding.</p>
<p><img alt="Test Image with Light Banding" src="../../../_static/images/ex-sensorcam/test-image-light-banding.png" /></p>
<p><strong>Figure 4 &nbsp; Test image showing fluorescent or LED light banding</strong></p>
<h2 id="4-notation-help-commands">4. Notation\&amp; Help commands<a class="headerlink" href="#4-notation-help-commands" title="Permanent link">&para;</a></h2>
<h3 id="41-notation">4.1 Notation<a class="headerlink" href="#41-notation" title="Permanent link">&para;</a></h3>
<p>The notation used in the reference material uses symbols according to the following convention:</p>
<p><strong>%</strong>&nbsp; &nbsp; &nbsp; used to designate a digit as part of a bank/sensor designator in bsNo style. i.e. 0/2, b/s or %/% or %%<br />
<strong>#</strong> &nbsp; &nbsp; &nbsp; used to designate a digit as part of a decimal number as in ### for a 3 digit decimal number.<br />
<strong>$</strong> &nbsp; &nbsp; &nbsp; used to designate a single alphanumeric character(0-9 or A-Z) depending on context.<br />
<strong>S</strong> &nbsp; &nbsp; &nbsp; Capital S may be used to refer to a specific sensor such as S02 for example. Designation format: S\%%<br />
<strong>[ ]</strong> &nbsp; &nbsp;&nbsp; Square brackets may be used to indicate optional command arguments(don't include[] in command).</p>
<p>Sensor "bsNo." number consists of two digits preferably written separated by a '/' as in 1/2 but in commands this is reduced to 12 as in command <strong>i12</strong>. Command 'i' has the form <strong>i%%</strong> indicating it requires a 2-digit bsNo. As 49 is an invalid bsNo.(s range is 0-7), i49 is invalid. Some commands require a DECIMAL number and are expressed as having form <strong>t##</strong> for example. <strong>t49</strong> is therefore a valid command. The 'm' command takes the form <strong>m$,##</strong> requiring a single digit and a 2-digit decimal number. For more details on commands see <strong>APPENDIX A</strong>.</p>
<p>Where bsNo.'s are printed, they can take several equivalent forms depending on context. Where possible they are printed as %/% e.g. 2/3. However an equivalent form is 023. Any printed sensor number starting with a '0' can be treated as equivalent to the '/' form so 023 == 2/3 == bank 2 sensor 3. The 0%% form is in fact the "OCTAL" format of bsNo. (Note: 087 and 097 are invalid. Keeping usage to banks ranging from 0 to 7 avoids any confusion).</p>
<p>Some diagnostic output (e.g. <strong>f%%</strong>) may resort to another numbering system  (i.e.HEXADECIMAL) for compactness, but for normal usage this notation can generally be avoided. Just be aware of the context in which numbers are being used.</p>
<p>Where words are in <em>italics</em>, these are the actual names used in the C++ programs for sensorCAM. Consequently they may seem cryptic, but their function is hopefully clear. </p>
<h3 id="42-help-commands">4.2 Help commands<a class="headerlink" href="#42-help-commands" title="Permanent link">&para;</a></h3>
<p>As the sensorCAM is still under development, the sketch still has numerous debugging options and a couple may be useful in understanding and optimizing the device. The help command has the form'h#' where the digit# turns ON a debug output. The following h# output options might be useful, particularly h7, i.e. a triggered wait(w):</p>
<p><strong>h</strong> &nbsp; &nbsp; &nbsp; &nbsp; shows current settings for help, <em>maxSensors</em> and <em>brightSF</em></p>
<p><strong>h%%</strong> &nbsp; sets <em>maxSensors</em> to%% for%% from 10 to 97(m0,%% is better alternative)</p>
<p><strong>h-</strong> &nbsp; &nbsp; &nbsp; turns OFF all debug options. h-# turns off individual debug values(5-9 only).</p>
<p><strong>h7[,#] &nbsp; causes the program to suspend any new data streaming upon any trip of the bank 1 sensors, allowing inspection of sensor data by using commands like f%%, &amp; , etc. &nbsp; h7,# changes default(1) to bank #</strong></p>
<h2 id="5-configuration">5. Configuration<a class="headerlink" href="#5-configuration" title="Permanent link">&para;</a></h2>
<h3 id="51-plan-a-grand-sensor-numbering-strategy">5.1 Plan a grand sensor numbering strategy<a class="headerlink" href="#51-plan-a-grand-sensor-numbering-strategy" title="Permanent link">&para;</a></h3>
<p>The first step is to decide a sensor distribution strategy &amp; numbering strategy. A sensorCAM has 10 banks (0-9) of eight (0-7) individual sensors available (total 80). Each <strong>bank</strong> can be tested as a whole to see if ANY sensors tripped or NO sensors tripped. Also placing a string of sensors in a row, for example along a platform, can indicate train position with the binary bank value increasing as the train approaches a signal as it crosses sensors 0 through 7. (see <strong>Figure 5</strong> for examples) Sensors are generally referred to with a two digit bank/sensor designation (their bsNo.) e.g Sensor 68 and 69 are therefore invalid bs numbers, 97 is valid. Use one bank for a platform (set of 8 sensors). Sensor S00 is reserved as a brightness reference sensor. Sensor S06 is also RESERVED for now. It is suggested that user's Sensors start with bank 1, i.e. S10, S11 &amp; upwards, with related sensors in their own bank. They do NOT need to be sequential (Follow the installation Guide for full details). <strong>With the recommended definitions set up, the user does not need to remember or refer to vPins for sensorCAM sensors at all - just use the S%% idntifier.</strong></p>
<p>For an EX-Command Station (CS), the 80 sensors will have vPin numbers ranging from #00 to #79 (DECIMAL) and mapped to 80 b/s id's(S00 to S97). Users can use, for example, <strong>AT(CAM 0%%)</strong> in EXRAIL commands where a vPin ID is called for. For the technically minded, vPin=BasePin+b<em>8+s. For further details on adopted notation, refer to section *</em>4.1.**</p>
<h3 id="52-preset-the-wifi-ssid-and-password">5.2 Preset the wifi SSID and password<a class="headerlink" href="#52-preset-the-wifi-ssid-and-password" title="Permanent link">&para;</a></h3>
<p>Before uploading the software into CAM check that it has the appropriate WiFi definitions for your railway WIFI_SSID &amp; SHEDWIFIPWD and perhaps for your test area ALTWIFI_SSID &amp; ALTWIFI_PWD are in your <strong>configCAM.h</strong></p>
<h3 id="53-adjust-other-configcamh-settings">5.3  Adjust other configCAM.h settings<a class="headerlink" href="#53-adjust-other-configcamh-settings" title="Permanent link">&para;</a></h3>
<p>&nbsp; &nbsp; a) If you want to use â€œlargerâ€ sensors, Place <em>#define SEN_SIZE 2</em> (0-7) in your <em>configCAM.h</em> (ver319+)<br />
 &nbsp; &nbsp; b) If i2c address 0x11 is in use, change to 0x12 (or 0x13) i.e. <em>I2C_DEV_ADDR 0x11</em> in your <em>configCAM.h</em><br />
 &nbsp; &nbsp; c) The first <em>TWOIMAGE_MAXBS</em> sensors use 2 consecutive image averaging to suppress noise spikes. If you want to set a different range to use this feature, change <em>configCAM.h</em> from the default(030) before upload.</p>
<h3 id="54-load-sensorcam-software">5.4 Load sensorCAM software<a class="headerlink" href="#54-load-sensorcam-software" title="Permanent link">&para;</a></h3>
<p>Follow you-tube to pre-configure the Arduino IDE for ESP32. If not using the MB and resorting to an FTDI interface, take EXTREME care not to connect 5V to the 3.3V CAM supply pin as this destroys CAMs. Using this IDE, load the software into sensorCAM with it unmounted. Then mount the CAM in a suitable place for tests. A long USB cable is problematical.</p>
<h3 id="55-establish-a-monitor-screen-to-sensorcam">5.5 Establish a monitor screen to sensorCAM<a class="headerlink" href="#55-establish-a-monitor-screen-to-sensorcam" title="Permanent link">&para;</a></h3>
<p>Establish a USB connected monitor (e.g. Arduino IDE monitor, or PROCESSING4 monitor, preferably at 115200 baud. The PROCESSING 4 monitor coded for the sensorCAM has the advantage of displaying the CAM's railroad image (or selected part thereof), all-be-it rather slowly!). Because of the many changeable CAM parameters, the WiFi link (webCAM) is not a reliable indicator of the sensorCAM image quality. It may be better or worse. The PC(using Arduino IDE) is only able to show images via WiFi, but because the sensorCAM runs on RGB565 format it cannot send WiFi (jpeg) images without rebooting into WiFi/jpg webCAM mode(under which it cannot read sensors!). The reboot/display/reboot cycle for WiFi webCAM is also tediously time consuming.</p>
<p>The sensorCAM takes some time to boot and establish sensing mode. The white flash LED starts flashing on every frame after about 10 seconds and data flows to the USB terminal. A period of averaging ensues withâ€œgoodâ€ sensing by about 30 seconds. This flow of data(and sensing!) can be suspended with theâ€˜wâ€™ wait command. Some commands(including a blank line entry) will subsequently restart the sensing camera and sensor output. The CAM may crash if it is left waiting for input for over 30 minutes. Reference images would also be long out of date.</p>
<h3 id="56-verify-wifi-webcam-operation">5.6 Verify wifi webCAM operation<a class="headerlink" href="#56-verify-wifi-webcam-operation" title="Permanent link">&para;</a></h3>
<p>The CAM can be switched to WiFi video mode with the '<strong>v1</strong>' command. '<strong>v2</strong>' can select your alternate WiFi network. ('<strong>v</strong>' will give sensorCAM software version). '<strong>v1</strong>' (or'<strong>v2</strong>') will reboot and load WiFi mode connecting to the network selected, and providing a URL e.g. http://192.168.0.xx that can be used to connect with a browser. An image, like <strong>Figure 1</strong> above, should be seen with controls for experimenting with Brightness etc. This image is educational and useful for camera alignment, but not necessarily a good indication of the sensorCAM (sensor mode) image because of the unpredictable parameter effects. To see a more reliable image run the PROCESSING 4 <em>SensorCAM.pde</em> monitor instead of Arduino IDE monitor (refer <strong>Section 6.</strong>). To exit video mode, try the monitor command '<strong>R</strong>' (or'<strong>F</strong>') If this software reset fails, try manually rebooting the sensorCAM (power OFF/ON or via the on-board black push-button using a non-metallic tool!</p>
<h3 id="57-familiarise-with-sensorcam-command-set">5.7 Familiarise with sensorCAM command set.<a class="headerlink" href="#57-familiarise-with-sensorcam-command-set" title="Permanent link">&para;</a></h3>
<p>Proceeding with the steps below, before mounting the camera over the railroad, is advisable to learn the steps and familiarize oneself with the sensorCAM command set. The setup commands will have to be repeated accurately once the CAM is mounted in its final location.</p>
<h3 id="58-sensor-placement">5.8 Sensor placement<a class="headerlink" href="#58-sensor-placement" title="Permanent link">&para;</a></h3>
<p>Setting up the CAM first requires locating sensors. When deciding on sensor location, be aware that the sensor response is slow compared to conventional sensors. Allowing for 500mSec delay, which at 100kph equates to 150mm of travel (in HO), may influence sensor placement. Best performance is obtained if the sensors are not within 20 rows/columns of an image edge. Remember to save to EPROM with the â€˜eâ€™ command once satisfied.Virtual sensor location can be set up in several ways. Option <strong>d.</strong> is preferred.</p>
<p><strong>a.</strong> &nbsp; Automatic loading from EPROM on bootup. This is only applicable after an initial sensor set has been established and command'e' used to save them to EPROM.</p>
<p><strong>b.</strong> &nbsp; The bright LED method: Place a bright LED at the required location and reduce room lighting if needed.Issue an '<strong>s%%</strong>' command(e.g.s00 for an off-track reference sensor) and wait for the CAM to scan and locate the LED and setup sensor coordinates. Remove the LED, restore lighting, and perform an â€˜<strong>r%%</strong>â€™ for new reference images.</p>
<p><strong>c.</strong> &nbsp; Issue a â€˜<strong>k%%,rrr,xxx</strong>â€™ command to place sensor%% at CAM pixel position xxx(column) and row rrr(y). This method is most useful for "tweaking" coordinates if you want to adjust the result of the LED method (the CAM has 240 rows/lines of 320 pixels each, numbered from 0). Use the â€˜<strong>i%%</strong>â€™ command for status of sensor.NOTE: Use â€˜<strong>k</strong>' to set up test sensors initially, but delay setting final positions until Processing 4 installed and enhanced â€˜<strong>k</strong>â€™ and â€˜<strong>a</strong>â€™ available. The alternate advanced â€˜<strong>a</strong>â€™ command does 3 commands in one(i.e. k, a &amp; r).</p>
<p><strong>d.</strong> &nbsp; Running Processing 4, an image can be downloaded, a bsNo. nominated by typing k%% (or a%%) and the mouse click on the image appends coordinates to k%%. Press Enter if the command is complete and correct.Similarly, the enhanced version of'a%%' sets position, enables, and records a reference all in one command.</p>
<h3 id="59-sensor-status-and-save">5.9 Sensor status and save<a class="headerlink" href="#59-sensor-status-and-save" title="Permanent link">&para;</a></h3>
<p>Once a sensor has been located, the 'p$' command can show/tabulate all defined positions up to bank$. To enable a sensor use the '<strong>a%%</strong>' command. This will enable AND record a new reference image for the sensor. It will then be included in the screen â€œdata dumpâ€. Only â€œenableâ€ sensors when UN-occupied, or do an <strong>r%%</strong> later when the sensor is empty. Also, remember to do an '<strong>e</strong>' command when you want to save positions in EPROM for next time.</p>
<h3 id="510-set-a-sensor-threshold">5.10 Set a Sensor Threshold<a class="headerlink" href="#510-set-a-sensor-threshold" title="Permanent link">&para;</a></h3>
<p>A threshold needs to be set to define the level of difference in image required to register a sensor trip or â€œOccupationâ€. This typically ranges from 40 to 60. Try â€˜<strong>t45</strong>â€™ for starters. Some fluctuating lighting and electrical â€œnoiseâ€ needs to be tolerated, but a higher threshold reduces sensor sensitivity for dark-on-dark contrast in particular. If there are â€œnoiseâ€ trips, adjust the threshold or min2trip a little higher. See <strong>APPENDIX B</strong> for more.  </p>
<h3 id="511-limit-printout-to-manageable-range">5.11 Limit printout to manageable range<a class="headerlink" href="#511-limit-printout-to-manageable-range" title="Permanent link">&para;</a></h3>
<p>It is desirable to set (using '<strong>m</strong>') a <em>maxSensors</em> parameter (e.g. 030) to limit diagnostic printouts to a manageable screen width, and especially important to set the <em>min2flip</em> parameter which helps filter out noise trips. However <em>min2flip</em> slows the response to valid trips by 100mSec (frame rate) per extra count. Suggest settings of 2(default) or 3. e.g.'<strong>m3,30</strong>' say. Note: <em>maxSensors</em> (pulled from EPROM) limits the following....</p>
<p><strong>a.</strong> the data stream for console/monitor, limited to enabled sensors below <em>maxSensors</em> (and above <em>minSensors</em>)</p>
<p><strong>b.</strong> histogram printout, to enabled sensors below <em>maxSensors</em> (see statistics command â€˜<strong>&amp;</strong>â€™)</p>
<p><strong>c.</strong> the <em>boxlt()</em> sensor boxes seen on Processing 4 images, for enabled sensors below <em>maxSensors</em></p>
<p><strong>d.</strong> i2c buffer data for 't' record, to bsn's below <em>maxSensors</em> (and above <em>minSensors</em>)(sent to Command Station) The cmd '<strong>t</strong>' acts as a flag to prepare a packet of i2c data that the CS can reconstitute as per the USB ASCII data stream/scroll.</p>
<h3 id="512-led-bank-trip-indicator-eprom">5.12 LED bank trip indicator &amp; EPROM<a class="headerlink" href="#512-led-bank-trip-indicator-eprom" title="Permanent link">&para;</a></h3>
<p>If you want a LED bank occupancy indicator on the CAM, use the '<strong>n$</strong>' command to cause a bank occupied LED to show (default Bank 2). <em>nLED, min2flip, maxSensors</em> and <em>threshold</em> can be saved to EPROM, along with sensor positions and twins (see <strong>5.15</strong> below) with the '<strong>e</strong>' command. <em>minSensors</em> is not currently saved in EPROM (set by'n')</p>
<h3 id="513-sensor-reference-image-refreshing">5.13 Sensor reference image refreshing<a class="headerlink" href="#513-sensor-reference-image-refreshing" title="Permanent link">&para;</a></h3>
<p>Although sensor enabling (<strong>a</strong>) causes an immediate reference capture, it may be necessary to occasionally do a fresh reference capture for all sensors (make sure they are unoccupied!) by using the '<strong>r00</strong>' command. Individual sensor references can be refreshed using â€˜<strong>r%%</strong>â€™. The results of a refresh can be seen in the scrolling â€œdata dumpsâ€ of enabled sensors, their â€œdifference scoresâ€ (32-99), and their perceived occupancy state. The sensor 00 is constantly averaged and refreshed every 6.4 seconds. Furthermore, there is an automatic refresh process that cycles through enabled sensors and regularly averages 32 consecutive sample images.<br />
If the sensor remains unoccupied, it updates the reference, compensating for slow lighting changes. This is SUSpended initially(after Reset) until an'<strong>r%%</strong>' command is issued by the user, after which "SUS" will disappear from the output data. The latest version of sensorCAM ASSUMES the sensors are all empty, and automatically ends SUSpend mode early.</p>
<h3 id="514-scrolling-data-interpretation">5.14 Scrolling data interpretation<a class="headerlink" href="#514-scrolling-data-interpretation" title="Permanent link">&para;</a></h3>
<p>The scrolling data dump displays â€œSUSâ€ (suspend) if auto updates are off. It also displays <em>threshold</em>(T), <em>min2trip</em>(M), the bank assigned to the on-board LED(N), S00 reference diff. score, as well as the S00 reference brightness(R) and its current actual brightness(A), a brightness loading(B) and other enabled sensors. â€˜Aâ€™ is the Actual latest sum of the 48 bytes of a sensor image (max 3024) and should be between 1200 and 2500 ideally. Following a reference refresh (<strong>r</strong>), for an unoccupied image, the (noisy) diff scores should be 32-37. If references are being updated, a note will appear at the right hand side of the data dump in the form of â€œ<strong>Ref 0%%</strong>â€ to indicate that a new reference for an UNOCCUPIED sensor has occurred. This dump allows for performance monitoring during commissioning.<br />
:<strong>oo46##</strong> indicates tripped sensor (## = occupied) sensor are shown by default with a central diff score and "##".<br />
:<strong>?-46-?</strong> indicate an above threshold image potentially occupied (waiting for <em>min2trip</em>), whereas <br />
:<strong>oo47?T</strong> indicates suspected occupied but no confirmation from Twin (see <strong>5.15</strong>).</p>
<p>Using theâ€˜<strong>@##</strong>â€™ command, the '#' "tripped" indicator can be changed to any ASCII character(01-127). For recent versions of Arduino IDE monitor, â€˜<strong>@</strong>â€™ orâ€˜<strong>@12</strong>â€™ command gives a particularly wide BOLD â€œspade" "occupiedâ€ character that is easier to spot (don't use <strong>@</strong> or <strong>@12</strong> if it doesn't produce the â€œspadeâ€ as it will misalign columns. Try @11 instead.).</p>
<h3 id="515-second-opinions-twin">5.15 Second opinions (Twin)<a class="headerlink" href="#515-second-opinions-twin" title="Permanent link">&para;</a></h3>
<p>If necessary, another option can be tried to address "noise" trips if all else fails. It is possible to "get a second opinion" on a sensor by assigning a "Twin" sensor (using <strong>i%%,$$</strong>). For example if sensor S15 is prone to noise trips, set a Twin using sensor S05(say). Set up the Twin position to touch or slightly overlap the primary sensor(S15)with the commands â€˜<strong>a05,rrr,xxx</strong>â€™. The primary sensor will not register â€œOccupiedâ€ (tripped) unless the Twin agrees. Note: The Twin should have a bsNo less than the primary sensor to avoid introducing an extra 100mSec delay to the trip time as the lowest bsNo is evaluated first. We suggest using bank 0 for twins, or a lower number in the same bank.</p>
<h3 id="516-other-diagnostic-commands">5.16 Other diagnostic commands<a class="headerlink" href="#516-other-diagnostic-commands" title="Permanent link">&para;</a></h3>
<p>There are other commands that can be used to optimise the CAM performance by trial-and-error. These include Frame(<strong>f</strong>), GetCAMsettings(<strong>g</strong>), adJustCAMsettings(<strong>j</strong>),  Statistics(<strong>&amp;</strong>) &amp; Calibrate (<strong>c</strong>))(not recommended).If the scene contrast is inadequate, a lighter reflector between the tracks is a cure particularly in fiddle yards (e.g. light green grass).</p>
<p>Explore and familiarize: Operational output commands will give the sensor states and include Individual (<strong>i</strong>), Bank (<strong>b</strong>),Diff (<strong>d</strong>), Position (<strong>p</strong>), &amp; Query enabled (<strong>q</strong>). Other input sensor commands include Zero(<strong>o</strong>), One(<strong>l</strong>), Enable(<strong>a</strong>),Undefine(<strong>u</strong>)&amp; the define coordinate(<strong>k</strong>) command. Zero '<strong>o</strong>' (oscar) and One '<strong>l</strong>' (lima) preset <em>*</em><em>and disable</em>* sensors.</p>
<p>NOTE: Historically the term â€œactivateâ€ has been used in the CAM program rather than â€œenableâ€. In the context of sensorCAM, activated means â€œenabledâ€ rather than output â€œ1â€ as typically may be used in EX-CS sensor documentation. This manual has been rewritten to use the "enabled" terminology, but names and references in the actual program still use the original terminology, so interpret â€œactivatedâ€, in a sensorCAM context, as â€œenabledâ€. Sensor output is referred to as "tripped" (1/occupied) or "untripped" (0/unoccupied).</p>
<p>Test image with Fluorescent or LED lighting - note three faint dull stripes across white test panel in <strong>Figure 5</strong> below. Strong banding is also evident in <strong>Figure 4</strong>. Horizontal stripe position varies frame-to-frame as not effectively synchronized with mains yet.  Good quality LED lights don't flicker. 
(<strong>Figure 5</strong> image was obtained using <strong>V, H</strong> &amp; <strong>Y60</strong> Processing4 commands)</p>
<p>The mains supply synchronization is currently inadequate (ESP32-CAM limitation) so drifting illumination bands will add a little to the "noise" seen by the sensors. The significance of this may need evaluation by experiment.</p>
<h3 id="517-pvtthresholds-sensor-size">5.17 pvtThresholds &amp; sensor size<a class="headerlink" href="#517-pvtthresholds-sensor-size" title="Permanent link">&para;</a></h3>
<p>Two additional features have been added which may resolve lingering issues. Individual thresholds can be set to override the "global" threshold set with '<strong>t##</strong>'. The command '<strong>t##,%%</strong>' will set a <em>pvtThreshold</em> for sensor S%% replacing the â€œglobalâ€ (t##) value. It can be removed with the '<strong>t00,%%</strong>' command. This way a higher threshold can be set on a â€œnoisyâ€ sensor.  While an increased <em>pvtThreshold</em> may reduce its sensitivity, it has no effect on the other sensors. â€˜<strong>t1,%%</strong>â€™ will cancel all pvtThresholds in one bank, while â€˜<strong>t1,99</strong>â€™ cancels ALL pvtThresholds in the CAM.</p>
<p>The second feature enables the size of the sensor to be increased. This is done by inserting spare pixels in a cross(+) through the 4x4 sensor moving 4 pixels out to each of the corners of a larger footprint. The parameter SEN_SIZE (default 0) adds from 1 to 9 rows of spare pixels. This parameter is set in <strong>configCAM.h</strong> and may, for example, allow a sensor to be placed so as to register a greater variation in pixel values. A uniform 16 identical pixels is less effective than ones capturing various colours/shades. If it can include a shadow of a passing loco/wagon, then the â€œdiffâ€ can be stronger and a more positive trip attained. A footprint size increase does affects ALL sensors.</p>
<p>It is desirable to place sensors where they generate a â€œmottledâ€ image of pixels rather than a uniform colour which makes distinguishing grey roofs against plain grey track hard. Pixel size is therefore relevant. It is helpful if the pixels are the width of sleepers so they can be distinguished. If they can't, then try an offset sensor that sees track bed and trackside grass/shadows say. <strong>Table 1</strong> indicates pixel/sensor sizes relative to sleepers and track gauge. It shows that sleeper detection is limited with the ov2640 QVGA(240x320) resolution. Future sensorCAM variants may do better.  An angled camera (less than 30degrees) could benefit from a glimpse of the side of the loco/coach/wagon and increase the field of view, but parallax issues may arise.</p>
<table>
<thead>
<tr>
<th>OV2640</th>
<th>CAM(std.  lens)</th>
<th>field of&nbsp;view</th>
<th>54 deg</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>CAMERA HEIGHT:</td>
<td>(mm)</td>
<td>800</td>
<td>800</td>
<td>1000</td>
<td>1000</td>
<td>1200</td>
<td>1200</td>
<td>1500</td>
<td>1500</td>
<td>1800</td>
<td>1800</td>
</tr>
<tr>
<td></td>
<td>app. image width</td>
<td>(mm)</td>
<td>810</td>
<td>810</td>
<td>1016</td>
<td>1016</td>
<td>1220</td>
<td>1220</td>
<td>1525</td>
<td>1525</td>
<td>1830</td>
<td>1830</td>
</tr>
<tr>
<td>QVGA</td>
<td>pixel size</td>
<td>(mm)</td>
<td>2.18</td>
<td>2.18</td>
<td>2.73</td>
<td>2.73</td>
<td>3.27</td>
<td>3.27</td>
<td>4.09</td>
<td>4.09</td>
<td>4.91</td>
<td>4.91</td>
</tr>
<tr>
<td></td>
<td>SEN_SIZE:</td>
<td>setting</td>
<td>0</td>
<td>2</td>
<td>0</td>
<td>2</td>
<td>0</td>
<td>2</td>
<td>0</td>
<td>2</td>
<td>0</td>
<td>2</td>
</tr>
<tr>
<td></td>
<td>Sensor Size</td>
<td>(pixels)</td>
<td>4x4</td>
<td>$6\times 6$</td>
<td>4x4</td>
<td>6x6</td>
<td>4x4</td>
<td>$6\times 6$</td>
<td>4x4</td>
<td>$6\times 6$</td>
<td>4x4</td>
<td>$6\times 6$</td>
</tr>
<tr>
<td></td>
<td>ratio:gauge/sensor</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>scale</td>
<td>sleeper</td>
<td>std gauge</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>O  1:43</td>
<td>5</td>
<td>32</td>
<td>3.7</td>
<td>2.4</td>
<td>2.9</td>
<td>2.0</td>
<td>2.4</td>
<td>1.6</td>
<td>2.0</td>
<td>1.3</td>
<td>1.6</td>
<td>1.1</td>
</tr>
<tr>
<td>HO 1:87</td>
<td>2.5</td>
<td>16.5</td>
<td>1.9</td>
<td>1.3</td>
<td>1.5</td>
<td>1.0</td>
<td>1.3</td>
<td>0.8</td>
<td>1.0</td>
<td>0.7</td>
<td>0.8</td>
<td>0.6</td>
</tr>
<tr>
<td>TT&nbsp;1:120</td>
<td>1.8</td>
<td>12</td>
<td>1.4</td>
<td>0.9</td>
<td>1.1</td>
<td>0.7</td>
<td>0.9</td>
<td>0.6</td>
<td>0.7</td>
<td>0.5</td>
<td>0.6</td>
<td>0.4</td>
</tr>
<tr>
<td>N 1:160</td>
<td>1.3</td>
<td>9</td>
<td>1.0</td>
<td>0.7</td>
<td>0.8</td>
<td>0.6</td>
<td>0.7</td>
<td>0.5</td>
<td>0.6</td>
<td>0.4</td>
<td>0.5</td>
<td>0.3</td>
</tr>
<tr>
<td></td>
<td>(mm)</td>
<td>(mm)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Table 1. Comparison of sensor sizes and track features</strong>  Ratio of gauge/sensor dimension</p>
<h3 id="6-processing4-monitorconsole">6 PROCESSING4 monitor/console<a class="headerlink" href="#6-processing4-monitorconsole" title="Permanent link">&para;</a></h3>
<p><img alt="Processing4 Console with Image" src="../../../_static/images/ex-sensorcam/processing4-console-image.png" /></p>
<p><strong>Figure 5 &nbsp; Processing 4 Console and image window</strong><br />
 &nbsp; Note: Sub-optimumâ€˜câ€™ settings caused green tint.</p>
<p>The Processing application displays the image using sensorCAM settings, and also shows colour coded sensors. As previously stated, the PROCESSING4 application is a crude USB monitor that enables the user to control and configure the sensorCAM with the additional benefit of being able to invoke a display of the image. All the sensorCAM commands can be used. At 115200 baud, a full RGB565 image takes 13 seconds, but it is often convenient to reduce this by prescribing a smaller image segment of limited rows and/or columns(e.g. <strong>Y120</strong> for lower half of a 240 row screen).<br />
The Processing 4 application can be <a href="https://processing.org">downloaded from here</a></p>
<p>The SensorCAM.pde code assumes the USB port for the sensorCAM is the lowest (comNo=0;) on the list displayed on startup. Should this not be the case, for example if another USB is being used to simultaneously run an IDE to a Command Station, then the <em>int comNo=0;</em> code line (line 15?) of the sensorCAM.pde will need to be increased to, for example, <em>int comNo=1;</em><br />
You may also increase the image display window size factor by editing the next <em>final int SF=2;</em> line to <em>=3;</em> or <em>=4;</em> on high res. screens.</p>
<p>Both Processing 4.2 and 4.3 have been tested successfully.</p>
<p>The sensorCAM Processing 4 monitor accepts commands <strong>W, X, Y</strong> &amp; <strong>Z</strong> which allow one to nominate a â€œstripâ€ or subsection to image. e.g. <strong>Z80 X240 Y</strong> will update the last quarter image(columns 240-319) of the 240x320 pixels in 4 seconds. This shortcut method enables, for example, comparison of quarter images under different lighting conditions by using different <strong>X</strong> values. Similarly <strong>W60 Y120</strong>  will produce a quarter image from row 120. Each part image is pasted over previous images. Each new image appears more quickly if only a subsection is specified this way. The next image can be flipped Vertically(y) and Horizontally(x) by using <strong>V</strong> &amp;/or <strong>H</strong> before capture. The <strong>Figure 5</strong> image used  <strong>V H Y60</strong>  The values for V, H, W, X &amp; Z are remembered for subsequent '<strong>Yrrr</strong>' commands so need not be repeated.<br />
<strong>NOTE: Do not flip image before creating new sensors as cursor coordinates don't flip!</strong></p>
<p>The image will have enabled sensors (b/s) boxed and identified by a (resistor) colour code. Left bar is bank# and right bar is sensor#. Combined, they give the bsNo. If two sensors have the same coordinates, the colour code will be for the highest bsNo. <strong>N.B.</strong> Only sensors below maxSensors will be boxed. Note the â€˜<strong>H</strong>â€™ command will REVERSE the coding from b/s to s/b.<br />
(The resistor colour code is 0:black 1=brown 2=red 3=orange 4=yellow 5=green 6=blue 7=violet 8=grey 9=white)</p>
<h4 id="processing4-command-summary">PROCESSING4 command summary:<a class="headerlink" href="#processing4-command-summary" title="Permanent link">&para;</a></h4>
<p><strong>W###</strong> &nbsp; will limit the image to### rows wide/high(1-240) - default 240</p>
<p><strong>X###</strong> &nbsp; will start the image from column ###(0-319) - default 0-uses the sensorCAM'x' command.</p>
<p><strong>Y###</strong> &nbsp; will initiate an image download starting at row ### (0-239)-default 0-uses the sensorCAM 'y' cmd.</p>
<p><strong>Z###</strong> &nbsp; will limit the image to ### columns (1-320)- default 320-uses the sensorCAM 'z' command.</p>
<p><strong>H</strong> &nbsp; will flip/mirror subsequent images horizontally. (<strong>Note:</strong> reverses bsNo sensor colour code to sb!)</p>
<p><strong>V</strong> &nbsp; will flip/mirror subsequent images vertically. (V + H effectively rotates image 180 degrees)</p>
<p><strong>R</strong> &nbsp; will cause a firmware reset of the sensorCAM via the DTR line of the FTDI interface. CAM will enter a wait mode for confirmation. Reset can be aborted with command'aw'(Abort&amp;Wait). Ctrl-R Resets CAM instantly.</p>
<blockquote>
<p><strong>NOTE</strong></p>
</blockquote>
<ol>
<li>
<p>The above commands ARE CASE SENSITIVE. They are recognized by Processing 4 as non-sensorCAM commands and processed in the monitor/PC. Commands <strong>X, Y</strong> &amp; <strong>Z</strong> in turn automatically issue related sensorCAM commands <strong>x, y</strong> &amp; <strong>z</strong> respectively, with appropriate parameters. The '<strong>y</strong>' command is used repeatedly, once for each new image line(row). The '<strong>y</strong>' command suspends sensorCAM immaging, holding a single â€œfrozenâ€ frame until a terminating command is received. To resume normal operation at the end of command '<strong>Y</strong>', the double-y command '<strong>yy</strong>' is automatically sent. However, if the user enters a'<strong>y</strong>' by error (e.g. wanting upper case '<strong>Y</strong>'), the monitor may show a binary string of data (verbose mode) and a manually entered '<strong>yy</strong>' is needed to recover. Typing lower case <strong>x</strong> or <strong>z</strong> may also negate any previous <strong>X</strong> or <strong>Z</strong> settings.</p>
</li>
<li>
<p>If you use <strong>H</strong> to mirror, the colour coding for boxed sensor number (bsNo.) has to be read right to left.</p>
</li>
<li>
<p><strong>Ctrl-E</strong> and <strong>Ctrl-N</strong> enable/disable echo of commands, as typed, to the monitor/log file. It can replace the user's focus on the CAM image Cmd: window. <strong>YO</strong> helpfully toggles the verbose mode. The command <strong>Y</strong> images from row 0 by default.</p>
</li>
</ol>
<h2 id="7-wiring-requirements">7 Wiring Requirements<a class="headerlink" href="#7-wiring-requirements" title="Permanent link">&para;</a></h2>
<p>Refer to <strong>Figure 7</strong> and <strong>Appendix F</strong> for alternate solutions for connecting sensorCAM to an i2c bus for remote control. For initial testing, the basic ESP32-CAM and ESP32-CAM-MB(CH340 based USB Mother Board) could be sufficient.  Take care to use level shifting  if using a 5V mega. </p>
<p>The recommended hardware interface to a CS is currently the <strong>Sparkfun Endpoint</strong> system which permits the i2c bus to be run over long standard Cat5 twisted pair cable, which can also carry the required raw power supply. The Sparkfun Endpoints are used <strong>in pairs</strong> and can cater for voltage shifting between 5V Command Stations(e.g. Mega) and 3.3V sensorCAM as required. For the very simplest off-the-shelf arrangement, an ESP32-WROVER-DEV CAM with a cheap ESP32 breakout board including regulator can be linked to an Endpoint with 4 Dupont wires for a working CAM system on the end of a cat5 cable of considerable length as indicated in <strong>Figure 6</strong>, needing only a remote, preferably electrically isolated(floating),9-12Vdc 0.5A power supply and a matching endpoint on a Command Station.  For a cheaper solution, use the PCA9515 with dupont jumpers for a limited (2m?) reach with either esp32-CAM or Wrover-CAM.<br />
<strong>Note:</strong> The Sparkfun Endpoint may also need a jumper cut or joined for i2c bus voltage level matching to the Command Station.  </p>
<p>The SensorCAM software has been almost exclusively tested on the ESP32-CAM-MB as seen in <strong>Figure 7</strong>. The original prototype was fitted with some enhancements that may not be needed for the user's application, such as an external antenna and extra LED indicators. NOTE that an Antenna attachment to the ESP32-CAM requires a solder link adjustment on the CAM (refer you-tube CAM tutorials) but most wi-fi works with the on-board antenna. However, at least one â€œsuper brightâ€ LED (the "programmable nLED") is recommended for convenience to visually indicate when a sensor is â€œtrippedâ€, connected between 3.3V via a resistor (~470R) to GPIO14.</p>
<p>For testing beyond that available via a USB cable, the most basic interface to a short i2c cable to a Command Station (Mega) is based on the PCA9515 level shifter shown in <strong>Figure 7</strong>. This is limited in range and may require tuning of the i2c bus for best performance. See <strong>Appendix F</strong> for a more capable Sparkfun Endpoint configuration using a separate 5V switching regulator, at a small increase in cost, reliability and effort.  The connection cable between PCA9515 and <strong>CAM</strong> may be up to 2m long for extra reach. </p>
<p>The ESP32-CAM reset button, remotely mounted, may be difficult to access. To reset the device, two options need to be available. These can be via software command, either from the attached USB monitor, or i2c connected Command Station, or via a power supply induced reboot. A switch at the (â€œwall-wartâ€) 9V supply is recommended independent of the CS supply. The USB connection is needed to set up the sensors initially and view images, but should be able to be disconnected once setup testing is complete.  Some esp32's need a 1uF on the reset pin.</p>
<p>The ESP32-WROVER-DEV board is a good alternative to the ESP32-CAM-MB.The slightly bigger CAM will be a little more convenient with the ESP32S 38P Expansion board. This 38 pin expansion board with 5V regulator is described in the video below <strong>BUT IGNORE PRESENTERS DESCRIPTION OF HIS FAULTY 5V REGULATOR AT THE END</strong></p>
<p>https://www.youtube.com/watch?v=AP_CX-SFPAQ</p>
<p><strong>Note:</strong> Care is needed as the WROVER CAM has 40 pins (not 38) but the spare end Gnd and Vcc can remain disconnected (cut off?).</p>
<p><img alt="ESP32 Wrover CAM with Sparkfun Endpoint" src="../../../_static/images/ex-sensorcam/esp32-wrover-sparkfun-endpoint.png" /></p>
<p><img alt="ESP32 Wrover CAM with PCA9515A" src="../../../_static/images/ex-sensorcam/esp32-wrover-pca9515a.png" /></p>
<p><strong>Figure 6 &nbsp; ESP32 WROVER-CAM&amp; interface</strong></p>
<p><img alt="ESP32 CAM MB with PCA9515A" src="../../../_static/images/ex-sensorcam/esp32-cam-mb-pca9515a.png" /></p>
<p><strong>Figure 7 &nbsp; PCA9515A 3.3V to 5V i2c interface improvisation compared to a full feature prototype solution</strong><br />
 &nbsp; Note: for 3.3V microprocessors (e.g. CSB1) ensure Vcc1 is connected to 3.3V (Vcc0) not 5V.</p>
<h2 id="8-communication-and-host-operation">8 Communication and Host Operation<a class="headerlink" href="#8-communication-and-host-operation" title="Permanent link">&para;</a></h2>
<h3 id="81-intro">8.1 Intro<a class="headerlink" href="#81-intro" title="Permanent link">&para;</a></h3>
<p>The operation of the railway depends on a Control Station that polls the sensorCAM for sensor states.This might be a dedicated Arduino Mega 2560 for example. It might be a Command Station running DCC-EX and EXRAIL software, or your own personal device &amp; code. If the sensorCAM is powered up with default settings (from EPROM), or adjusted by the user at the start, the program need only talk to sensorCAM over an i2c bus using the commands a,b,i,I &amp; o for example, or it may be more sophisticated, providing a channel from a Control Station console to the sensorCAM to enable all configuration commands via the i2c bus.</p>
<p>The i2c bus is running at 100kHz on the prototype software. It has not been tested at any higher speed yet. It is running fine over a 20m long i2c bus to the master microcontroller (CSB1 or Mega).</p>
<h3 id="82-dcc-ex-command-station">8.2   DCC-EX Command Station<a class="headerlink" href="#82-dcc-ex-command-station" title="Permanent link">&para;</a></h3>
<p>Setting up a DCC-EX Command Station, should you have one, requires configuration details placed in files config.h and mySetup.h along with a driver IO_EXSensorCAM.h and myAutomation.h. These must go in the directory containing file CommandStation-EX.ino. The IO_EXSensorCAM.h driver is based on the modified IO_EXIOExpander.h code. Refer to APPENDIX H for installation details. EXSensorCAM.h code mirrors the i, I, o, t &amp; m commands, while the EXIODPUP command may serve as the enable function (a). EXIOExpander.h codes don't have the â€œcontrol &amp; setupâ€ sensorCAM functions otherwise available from a USB console so additional functionality was added using the DCC-EX sensorCAM native command <N> (if using the newest <em>CamParser.cpp</em>).</p>
<h3 id="83-non-dcc-ex-system">8.3 Non-DCC-EX system<a class="headerlink" href="#83-non-dcc-ex-system" title="Permanent link">&para;</a></h3>
<p>Proprietary Master:  If writing raw code for another Command Station, you will need details on the protocol used by sensorCAM on the i2c bus, and code to interpret the bus bytes and reconstitute text for the console. Two such prototype examples exists.  V155 of sensorCAM incorporates a subset of the DCC-EX IOexpander codes so that EXRAIL can use sensorCAM without further modification.  V301&amp; later mostly use ASCII code characters.</p>
<h3 id="84-monitor-lighting">8.4 Monitor Lighting<a class="headerlink" href="#84-monitor-lighting" title="Permanent link">&para;</a></h3>
<p>Stable good lighting is needed.  Gross Lighting changes will have two effects, namely cause trips of most sensors and stop automatic reference refreshes, it may be wise to include monitoring for this eventuality by detecting and setting an â€œalarmâ€ state. The reference sensor (S00) is automatically re-referenced every 6.4 seconds so will indicate a fault-trip for a maximum of 6.4 seconds. All other sensors will continue to indicate a trip until the user resets the references with an r00 (having checked all unoccupied). Setting up a second "reference" sensor (say S01) that would NOT get reset automatically and would stay tripped as a more enduring fault indicator could be helpful. You could reserve entire bank 0 for this purpose or use the 'nO' command to set the programmable pLED to light up if there is any enduring trip on bank 0.  Consider using the "qLED" GPIO2.   By default BLKOLED was set to GPIO2 LED, with BLK1LED to BLK3LED all set to GPIO33 LED. PLED uses GPIO14</p>
<h2 id="appendix-a">APPENDIX A<a class="headerlink" href="#appendix-a" title="Permanent link">&para;</a></h2>
<h3 id="esp32-sensorcam-command-summary">ESP32 sensorCAM Command Summary<a class="headerlink" href="#esp32-sensorcam-command-summary" title="Permanent link">&para;</a></h3>
<p>rev 1SEP25</p>
<h4 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h4>
<p>Up to 10 banks (0-9) of sensors. Each bank can have up to 8 enabled sensors (0-7). Bank/sensor (%%) up to'97'.  Array <em>Sensor[n]</em> holds coordinates(rx) of sensor n. Offsets are <em>long int</em>. Array uses 88+320 bytes(10<em>8</em>4) EEPROM.  Sensors are grouped into banks(b) of individuals(s). e.g. bsNo 6/7 identifies bank 6, sensor 7.(n=8<em>6+7=55=067) Sensors are undefined if coordinates(rx) are set to 00. They are disabled if <code>SensorActive\[n]</code> is set to false.<br />
If a sensor detects differences, then any output LED (<em>pLED qLED</em>) assigned to the associated Bank of sensors should turn ON.<br />
On reset (power-up), reference grabs are taken for all defined (in EEPROM) sensors, and then enables them.
To define a sensor, use'</em><em>a</em><em>' command,  Processing4, or (outdated method) a bright LED on the desired spot and dim lighting with a "scan" (</em><em>s%%</em><em>). Save in EEPROM(</em><em>e</em>*). SensorCAM uses RGB565 image format which is incompatible with JPG, so auto reboots between SensorCAM or webCAM modes.</p>
<h4 id="commands-below-are-received-over-the-usb-or-i2c-interfaces__">Commands below are received over the USB or i2c interfaces.__<a class="headerlink" href="#commands-below-are-received-over-the-usb-or-i2c-interfaces__" title="Permanent link">&para;</a></h4>
<p><strong>a%%[, rr, xx]</strong> <strong>enAble</strong> <em>Sensor[%%]</em> &amp; refresh <em>Sensor_ref[%%]</em>, <em>cRatios</em> etc. 4x4 from image in latest frame. <strong>(Note 20.)</strong></p>
<p><strong>b#[,$]</strong>&nbsp; &nbsp; <strong>Bank</strong> # sensors. Show which sensors OCCUPIED(in bits 7-0).(1=occ.)(b#$ sets <em>brightSF</em>)</p>
<p><strong>c$$$$</strong>&nbsp; &nbsp; <em>re</em><em>Calibrate</em>* camera CCD occasionally and grab new references for all enabled sensors(Beware of doing this while any sensors are occupied! NB.Obstructed sensors will later need an <strong>r%%</strong>! Check all bank LEDS are off AND check all sensors are unoccupied before recalibrate. Can set AWB AEC AGC CB through $$$$ e.g. c0110<br />
Also able to change default setting for Brightness, Contrast &amp; Saturation with extra digits e.g. c$$$$012</p>
<p><strong>d%%[#]</strong>&nbsp; <strong>*Difference</strong> score in colour&amp; brightness between Ref&amp; actual image. Show# grabs.</p>
<p><strong>e</strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong>EPROM</strong> save of any new Sensor offset positions, pvtThresholds, new twins and 5 default parameter settings.</p>
<p><strong>f\%\%</strong>&nbsp; &nbsp; &nbsp; <strong>*Frame</strong> buffer sample display. Print latest bytes in <em>Sensor_ref[\%\%]</em> &amp;\d  Sensor  $[\%\%]$  positions.</p>
<p><strong>g</strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong>*Get</strong> Camera Status. Displays most current settings available in webcam window (both sensor\&amp; video mode).</p>
<p><strong>h$[,#]</strong> &nbsp; &nbsp; <strong>*Help(debug)</strong> output.  <strong>h9</strong>  to set all OFF,  <strong>h0</strong>  turn ON detailed USB output.'h7,#"Waits" scroll on bank# trip.</p>
<p><strong>i%%[,$$]</strong> &nbsp;<strong>Info.</strong> on S%%.  Status(enabled/occupied), position(r,x), any twin(S$$), pvtThreshold &amp; brightness</p>
<p><strong>j$#</strong> &nbsp; &nbsp; &nbsp; &nbsp; <strong>*adJust</strong> camera setting $ to value # and display most settings(as for '<strong>g</strong>'). '<strong>j</strong>' alone lists the options for $#</p>
<p><strong>k%%,rrr,xxx</strong> *set <strong>coordinates</strong> of Sensor S$$ to row: rrr &amp; column: xxx. Follow with  <strong>r%%</strong>. Verify values with  <strong>p$</strong> </p>
<p><strong>l%%</strong> &nbsp; &nbsp; &nbsp; (Lima) <strong>Latch</strong> sensor S%% to on(1 = occupied(LED lit) &amp; also set <em>SensorActive[%%]</em> false to disable sensing.</p>
<p><strong>m$[,%%]</strong> <strong>*Minimum</strong> $(2) sequential frames over <em>Threshold</em> to trigger/trip sensor. Shows list of parameters. <strong>(Note 14)</strong></p>
<p><strong>n#[,%%]</strong>   <strong>nLED</strong> bank Number assigned to the programmable status nLED. Optional  $n 10,\%\%$  to set  $\min$  Sensors.</p>
<p><strong>o%%</strong>  (Oscar) force <strong>Off</strong> sensor%% (0=UN-occupied(LED off) Also set <em>SensorActive[##]</em> false to disable updating.</p>
<p><strong>p$</strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong>*Position Pointe</strong>r table info for banks 0 to  $\$  giving DEFINED sensor r/ x) positions.  $p\%\%$  shorter.</p>
<p><strong>q$</strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong>*Query</strong> bank$, to show which sensors ENABLED(in bits 7-0). 1=enabled. <strong>q9</strong> gives ALL banks</p>
<p><strong>r\%\%[,0]</strong> &nbsp;<strong>Refresh</strong> Average Sensor_Ref[##] (if defined), enable\&amp; calc. cRatios etc. r%%,0 refreshes block  $S\% 0$  to  $S\%\%$ </p>
<p><strong>r00</strong> &nbsp; &nbsp; &nbsp; &nbsp; <strong>Refresh</strong> Average Refs etc. for ALL defined sensors. Ignores enable[]. Sensor[00] reserved for brightness ref.</p>
<p><strong>s%%</strong> &nbsp; &nbsp; &nbsp; <strong>*Scan</strong> for new location for sensor  $\%\%(00-97)$  . If found, records location in Sensor  $[0\%\%]$  .Note 12</p>
<p><strong>t##[,%%]</strong> <strong>Threshold</strong> level##(31-98 only) set as default. t##,%% sets the pvtThreshold for sensor%%.(t0,%% to clear)</p>
<p><strong>t##</strong> &nbsp; &nbsp; &nbsp; &nbsp; <strong>Triggers</strong>##(2-30 only) rows of scroll data(continuous scroll toggled off) Note: t1 alone toggles scroll on/off.</p>
<p><strong>t1,%%</strong>  &nbsp; &nbsp; clear 1 entire bank of <em>pvtThresholds</em>. Use <strong>t1,99</strong> to clear ALL banks(0-9). Note: <strong>t99</strong> lists all <em>pvtThresholds</em></p>
<p><strong>u%%</strong> &nbsp; &nbsp; &nbsp; <strong>Un-define</strong>/remove sensor %%  (Sensor S%%=0 &amp; set DISABLED) <strong>u99</strong> for ALL. Cmd '<strong>e</strong>' will erase from EPROM.</p>
<p><strong>v[1|2]</strong>&nbsp; &nbsp; &nbsp; <strong>Video</strong> mode. Causes reboot as a webserver. "<strong>v2</strong>" will connect to  2nd (alt.) router ssid.(<strong>v</strong> or <strong>v0</strong> for version)</p>
<p><strong>w</strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong>*Wait</strong> for new command line(\n) before resuming loop()(handy to stop display data scrolling- see <strong>t1</strong> toggle)</p>
<p><strong>x###</strong> &nbsp; &nbsp; &nbsp; *selects first pixel column(0-319) &amp; <strong>z###</strong> selects image width(### columns(1-320)) for imaging.</p>
<p><strong>y###</strong> &nbsp; &nbsp; &nbsp; *selects first row for image and initiates a binary data dump for that row (header + #*2 bytes) using rgb565.<br />
  &nbsp; &nbsp; &nbsp; &nbsp; This command starts a process that must, after a series of'y' commands, end with a terminator of'yy'.</p>
<p><strong>R</strong> &amp; <strong>F</strong>&nbsp; &nbsp; &nbsp; <em><strong>Reset</strong> commands- will Reset CAM and initiate the Sensor mode. Both will Finish the WebServer(</em><em>v</em>*) mode.</p>
<p><strong>\%,#,$</strong> &nbsp; &nbsp;  Convert bank to linear sensor starting with  S$$  and using r,x step sizes of <strong>#,$</strong>(0-31) Slope is "down-right".</p>
<p><strong>/%,#,$</strong> &nbsp; &nbsp;  Convert bank to linear sensor starting with S$$ as for '\' but line will slope "down-left" (-deltaX).</p>
<p><strong>&amp;</strong> &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;  <strong>statistics</strong> histogram on trips and potential trips since last'<strong>&amp;</strong>', then reset counters and start another sample process. The table gives number of single highs, double highs etc. and totals for No. of frames/run time</p>
<p><strong>@##</strong> &nbsp; &nbsp; &nbsp;  *set the "occupied" symbol in the scroll to ASCII character##. Default is 35('#') Arduino IDE <strong>@12</strong> is bolder!</p>
<p><strong>+#,$</strong> &nbsp; &nbsp; &nbsp; *add offset(# pixels) in $ direction to re-centre sensors after physical drift in CAM alignment. $(0-7) for N-NW</p>
<p>&nbsp; &nbsp; &nbsp; * These commands typically for diagnostic/setup use only. They wait for a line feed or command to resume.</p>
<p><code>Note: The value of"bs"(80 sensors 0-79dec) is printed in several formats. For data entry, bsNo format (% e.g. 47) is bank/sensor, so bsn=8*4+7=39dec.(vpin). S47 may be printed as(char) 47, 4/7, (octal) 047,(or hex 0x27) depending on context. Debug output likely uses OCT(or HEX). Note: OCT 0107=8/7, 0117=9/7.</code></p>
<h3 id="startup-notes">Startup Notes:<a class="headerlink" href="#startup-notes" title="Permanent link">&para;</a></h3>
<ol>
<li>Normal power up reset will initiate Sensor mode, as will the'R' command, and uses EPROM data settings.  </li>
<li>Sensor mode startup flashes white LED at 10Hz after ~10 seconds, and exhibits a"flicker" at ~20 seconds.  </li>
<li>Requested (v1) WebServer mode reset will flash LED at  ~3seconds and again (brighter) at ~8 seconds.  </li>
<li>After the 8 second flash the Webserver will be operational at web address 192.168.0.xx (xx from display)  </li>
<li>If the OV2640 camera or WiFi fails to initialize, the CAM resets and may restart/revert into Sensor mode!  </li>
<li>If USB FTDI/MB is removed or not connected to PC, then WebServer may fail/reboot. Power issue?  </li>
</ol>
<h3 id="i2c-command-notesex-cs-may-exhibit-small-variations-reduced-cmd-functionality-depending-on-driver">I2C command Notes:(EX-CS may exhibit small variations&amp; reduced cmd functionality depending on driver)<a class="headerlink" href="#i2c-command-notesex-cs-may-exhibit-small-variations-reduced-cmd-functionality-depending-on-driver" title="Permanent link">&para;</a></h3>
<p><strong>1.</strong> The same commands are valid from an I2C Master Arduino, but there are some variations.</p>
<p><strong>2.</strong> The commands with asterisks normally pause CAM execution so the operator can read USB output on a monitor screen. The same commands from I2C DO NOT wait for a new line, with the exception of'w'.<br />
<strong>3.</strong> Commands b,d,i,m,p,q&amp;t can return data to the I2C master Arduino(Mega). This data is delivered if the master calls a <em>Wire.requestFrom(addr,#)</em>; following the command, from the slave CAM address 17(0x11).<br />
<strong>4.</strong> The I2C data returned(after header byte) is in binary bytes and in a format depending on the last command.<br />
<strong>5.</strong> Header byte[0] is the ASCII command character (b,d.i,m,p,q,or t) or an error code(OxFE) if no valid data.<br />
<strong>6.</strong> If the error code is generated, it is followed by the last received (inappropriate) command string.<br />
<strong>7.</strong> b$ cmd returns$+1 sensor status bytes for bank$,$-1 etc. down to bank 0.'b' defaults to'b9'(all).<br />
<strong>8.</strong> d%% cmd returns 4 data bytes with binary values for bsn, maxDiff+bright, maxDiff&amp; bright in that order.<br />
<strong>9.</strong> i%% cmd returns 2 data bytes: byte[1]= bsn and byte[2]=0 if unoccupied or 1(true) if occupied.(+ more)<br />
<strong>10.</strong> p$ cmd returns Byte[0] header + count +3 data bytes per enabled (bank$) sensor+ parity (max 27 bytes).<br />
<strong>11.</strong> q$ cmd returns$+1 bank sensor enabled status bytes for bank$,$-1 etc. down to bank 0.'q' defaults to'q1'<br />
<strong>12.</strong> s%% Scan looks for a bright LED on a dimmer background. The LED should be placed on the desired sensor position. This old method of placing sensors is not recommended. The Scan command is to be deprecated.<br />
<strong>13.</strong> t##[,%%] cmd. initially sends CS the old threshold value (i.e. BEFORE change in the case of t##). Also returns sensor scores(bpd) in 2-byte pairs with MSB set so: bsn(+0x80 if undecided) &amp; bpd(+0x80 if OCCUPIED). Byte[0]header;[1]threshold;[2]S00bpd;[3]bsn;[4]bpd;[5]bsn;[6]bpd etc. Ends with bsn=80 (max 15 enabled)<br />
<strong>14.</strong> m$,%% sets maxSensors to %% (USB or i2c) (as can h%% (%%&lt;98)). m0,1%% sets minSensors. Data sent to screen is bound between min and maxSensors. Extra parameter status bytes added to i2c bus for display.<br />
<strong>15.</strong> The â€˜â€˜ character is just a null cmd. Used before R, d &amp; t to prevent BCD Mega itself pre-interpreting them.<br />
<strong>16.</strong> N.B.: The ESP32-CAM uses old ESP32 which has I2C limitations. It has a â€œpipelineâ€ for returning data which results in a delay in response. i.e. the first request after a command will return OLD data. A SECOND request should return the desired data described above. A third or fourth request may return updated data.<br />
<strong>17.</strong> Some commands take time to complete, as command processing can only happen once per 100mSeconds (i.e. the frame rate of the CAM). The I2C master should allow for latency in response where necessary.<br />
<strong>18.</strong> Data requested over i2c may have a parity byte appended, and a check byte in byte[31].<br />
<strong>19.</strong> NOTE Automatic updating of ref image of unoccupied sensors now starts after last SUS (suspend) indicator.<br />
<strong>20.</strong>  $a%%,$  rrr,xxx performs extended'create sensor' equivalent to  $k%%,$  rrr,xxx+  $a%%+$  r%% for new sensor  $%%$<br />
<strong>21.</strong> Connection to DCC-EX Command Station has cmd. variations. See APPENDIX C for revised command detail.</p>
<h2 id="appendix-b">APPENDIX B<a class="headerlink" href="#appendix-b" title="Permanent link">&para;</a></h2>
<h3 id="check-list-for-optimising-sensor-response">Check List for Optimising Sensor Response<a class="headerlink" href="#check-list-for-optimising-sensor-response" title="Permanent link">&para;</a></h3>
<p>In the situation where sensors may be tripping undesirably, there is a range of adjustments that can be made to find a satisfactory operating point. Some have disadvantages that need to be considered and compromises may be necessary.</p>
<p><strong>1.</strong> First step is to refresh the sensor reference image. Try Cmd: <strong>r00</strong>, or <strong>r%%</strong> for a single sensor. This may be necessary after any disturbance to the environment such as changed lighting.</p>
<p><strong>2.</strong> Check the "Diff" scores on the scrolling display. After a refresh they should be in the range 32-37 for normal operation. If occasional trips occur, one remedy is to increase the threshold with Cmd: <strong>t46</strong> say. Increasing the threshold reduces the sensitivity to low contrast objects (e.g. black over brown) If unoccupied Diff scores are consistently 32-35, reduce threshold for greater sensitivity.</p>
<p><strong>3.</strong> Is the lighting adequate? <strong>Steady</strong> muted daylight is ideal. Beware of rotating fans and other moving shadows (clouds?) (Note: may need to consider extreme case of mains induced ripple from 50/60Hz LED/fluoro lighting-to be discussed later) Brighter stable lighting means reduced "noise".</p>
<p><strong>4.</strong> Sensitivity to electrical "noise" can be reduced by increasing the "<em>min2trip</em>" parameter to 3 consecutive frames using Cmd: <strong>m3</strong> (default is m2). However this increases response time by 100mS.</p>
<p><strong>5.</strong> You can create a "Twin" sensor for a "second opinion" by placing a Second Sensor S$$ on the track adjacent to the primary sensor S%% (3-4 pixels away) by using the Cmd: <strong>a$$,123,234</strong> selecting the position from that of the primary sensor (obtained from Cmd: <strong>i%%</strong>) To avoid increasing response time, use a twin bsNo LOWER than the primary sensor (possibly in a â€œreservedâ€ bank, perhaps a matching bsNo in that bank). This twin S$$ can be assigned to the primary sensor S%% with the Cmd: <strong>i%%,$$</strong> The primary sensor will not trip unless the twin agrees. This suppresses pixel noise spikes.</p>
<p><strong>6.</strong> Check that there isn't anything elsewhere in the field of view that is moving and could trigger the auto exposure in the camera. e.g. spectators near the edge of the field of view.(It is possible to change camera ov2640 module settings with '<strong>j</strong>' and '<strong>c</strong>' commands, but this can be a frustrating experience and needs considerable practice as some settings interact and can be order dependent)</p>
<p><strong>7.</strong> Make sure you do a refresh/record reference (<strong>r</strong>) after any changes or the benefit will be obscured.</p>
<p><strong>8.</strong> Is the camera steady? No vibration or movement since the last reference images (<strong>r</strong>)?</p>
<p><strong>9.</strong> There is a 2-frame (experimental) averaging applied to low bank sensors (currently 0-2) This can be extended to cover all banks, if desired by increasing CAM parameter <em>TWOIMAGE_MAXBS</em> above 3/0</p>
<p><strong>10.</strong> There has been poorer behavior observed with sensors placed near the edge of the frame. They seem to experience more electrical noise than mid-frame sensors and may need extra attention.</p>
<p><strong>11.</strong> A statistics function can be obtained to see how bad spurious tripping is. The '<strong>&amp;</strong>' cmd gives a table of stats accumulated since the previous '<strong>&amp;</strong>' command. May be useful. HINT: You can compare two or more sensors with different settings on the same spot. Accumulate data with no genuine trips.</p>
<p><strong>12.</strong> Consider whether a pixel may be faulty or unduly noisy. Try another nearby sensor position.</p>
<p><strong>13.</strong> If necessary, enhance the brightness of the Sensor location with light colour or a small reflector.</p>
<p><strong>14.</strong> It is possible to set private thresholds on individual sensors if other solutions inadequate. (<strong>t##,%%</strong>)</p>
<p><strong>15.</strong> Consider adjusting <em>brightSF</em>($) if colour contrast is generally poor (<strong>b#,$</strong>) default 3, try 1-5.</p>
<p><strong>16.</strong> In some situations, repositioning sensor slightly to include loco shadow will give extra sensitivity.</p>
<p><strong>17.</strong> Last but not least, consider repositioning CAM for better oblique view angle giving more contrast for better detection, catching sides of coaches/wagons, shadows and some trackside references.</p>
<h2 id="appendix-c">APPENDIX C<a class="headerlink" href="#appendix-c" title="Permanent link">&para;</a></h2>
<h3 id="parsed-dcc-ex-cs-sensorcam-commands">Parsed DCC EX-CS sensorCAM commands<a class="headerlink" href="#parsed-dcc-ex-cs-sensorcam-commands" title="Permanent link">&para;</a></h3>
<p>The file <em>CamParser.cpp</em> has been added to the CS specifically tailored to provide a mechanism for the CS to send commands more easily than by using the clumsy diagnostic command style <strong><D&nbsp;\ANOUT&nbsp;vpin&nbsp;parm1&nbsp;parm2></strong>. The CS Native CAM command format is <strong><N&nbsp;c&nbsp;[parm1]&nbsp;[parm2]></strong> where command character '<strong>c</strong>' can be any of those listed below. Generally, to effect changes in sensorCAM, the CAM must be in the run mode (flashing).</p>
<p>The base vpin address defaults to 700 but one can use the <em>#define SENSORCAM_VPIN ###</em> for another value (in <em>config.h</em>). With 2 to 4 CAM's, use <strong><N&nbsp;\C&nbsp;vpin0></strong> when a switch is needed. The CAM# may also be placed, if defined in <em>config.h</em>, prefixing the sensor bsNo.<br />
e.g. <strong><Ni 2%%><Nr&nbsp;2%%></strong> also <strong><Nm 200><Nf 212><Nt 243></strong></p>
<h3 id="user-commands">User commands<a class="headerlink" href="#user-commands" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Example</th>
<th>Equivalent</th>
<th>sensorCAM command and action (some commands only return "ACK OK" to CS)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>\<N></strong></td>
<td>\<N></td>
<td>n/a</td>
<td>Lists current&amp; alt. defined CAM baseVpins.</td>
</tr>
<tr>
<td><strong><N \C vpin></strong></td>
<td><NC 600></td>
<td>Set base</td>
<td><strong>CAM</strong> vpin for following commands. <NC #> selects CAM # (1-4)</td>
</tr>
<tr>
<td><strong><N a %%></strong></td>
<td><Na 12 ></td>
<td>a12</td>
<td><strong>enAble</strong> sensor S%% (bsNo)</td>
</tr>
<tr>
<td><strong><N&nbsp;a%%&nbsp;row&nbsp;col></strong></td>
<td><Na&nbsp;12&nbsp;32&nbsp;43></td>
<td>a12,32,43</td>
<td><strong>enAble</strong> &amp; also set new coordinates for sensor bsNo&amp; refresh</td>
</tr>
<tr>
<td><strong><N b bank#></strong></td>
<td><Nb 1></td>
<td>b1</td>
<td><strong>Bank</strong> sensor states(all 8).(used by IFGTE() ATLT() e.g. to locate loco)</td>
</tr>
<tr>
<td><strong>\<N e></strong></td>
<td>\<Ne></td>
<td>e</td>
<td><strong>EPROM</strong> write any changed settings to sensorCAM EPROM.</td>
</tr>
<tr>
<td><strong><N f %%></strong></td>
<td><Nf 12></td>
<td>f12</td>
<td><strong>Frame image</strong> pixel data for Sensor_ref[] and sensor666[] (RGB bytes)</td>
</tr>
<tr>
<td><strong>\<N F></strong></td>
<td>\<NF></td>
<td>F</td>
<td><strong>Forced reboot</strong>, restoring sensorCAM sensor mode&amp; EPROM defaults</td>
</tr>
<tr>
<td><strong>\<N g></strong></td>
<td>\<Ng></td>
<td>g</td>
<td><strong>Get</strong> status ov2640 camera module settings(on sensorCAM monitor)</td>
</tr>
<tr>
<td><strong><N h%%></strong></td>
<td>&lt;Nh</td>
<td>h30</td>
<td>set <em>maxSensors</em> to limit display to below sensor S%%. Also <strong>Help</strong> (0-9)</td>
</tr>
<tr>
<td><strong><N i [%%]></strong></td>
<td><Ni 12></td>
<td>i12</td>
<td><strong>Information</strong> on sensor bsNo state, position &amp; twin (0=No twin)</td>
</tr>
<tr>
<td><strong>&lt;N i %%[ $$]</strong></td>
<td><Ni 12></td>
<td>i12,02</td>
<td><strong>Info.</strong> &amp; sets new twin sensor(S$$) for "second-opinion" on S%%.</td>
</tr>
<tr>
<td><strong><N j $ #></strong></td>
<td>&lt;Nj B 2</td>
<td>jB2</td>
<td><strong>adJust</strong> ov2640 parameters($)(Brightness, Contrast etc)(values 0-2 only)</td>
</tr>
<tr>
<td><strong><N l %%></strong></td>
<td>&lt;Nl 12</td>
<td>l12</td>
<td>(lima) <strong>Latch</strong> output state of sensor bsNo to 1 &amp; disable</td>
</tr>
<tr>
<td><strong>&lt;N m $ [%%]</strong></td>
<td><Nm 3 20></td>
<td>m3,20</td>
<td><strong>Min/max</strong> <em>min2trip</em>(1-4) frames [maxSensors] Show parameter status data</td>
</tr>
<tr>
<td><strong><N n$ [%%]></strong></td>
<td><Nn 1 10></td>
<td>n1,10</td>
<td>set <strong>nLED</strong>= bank $ [and <em>minSensors</em>=%% to limit display range] $<Nn v> verifies</td>
</tr>
<tr>
<td><strong><N o %%></strong></td>
<td><No 12></td>
<td>o12</td>
<td>(oscar) <strong>Zero</strong> output state of sensor bsNo. Reset to 0&amp; disable.</td>
</tr>
<tr>
<td><strong><N p %%></strong></td>
<td><Np 1></td>
<td>p1</td>
<td><strong>Positions</strong>(r,x) of all enabled sensors in bank are listed.</td>
</tr>
<tr>
<td><strong><N q #></strong></td>
<td><Nq 1></td>
<td>q1</td>
<td><strong>Query bank</strong># enabled states of sensors[0 indicates sensor disabled]</td>
</tr>
<tr>
<td><strong><N r [%%]></strong></td>
<td><Nr 12></td>
<td>r12</td>
<td><strong>Refresh Reference</strong> image for sensor S%%(bsNo)(default ALL=r00).</td>
</tr>
<tr>
<td><strong><N s %%></strong></td>
<td><Ns 12></td>
<td>s12</td>
<td><strong>Scan</strong> image for brightest spot and set bsNo to center that pixel.</td>
</tr>
<tr>
<td><strong><N t ## [%%]></strong></td>
<td><N t 43 12></td>
<td>t43,12</td>
<td><strong>Threshold</strong> displayed, sets global threshold (32-98), [sets a pvtThreshold]</td>
</tr>
<tr>
<td><strong><N t ##></strong></td>
<td><N t 10></td>
<td>t10</td>
<td>Tabulate ## (2-31) rows of scroll data similar to CAM scroll</td>
</tr>
<tr>
<td><strong><N t # [%%]></strong></td>
<td><Nt 1></td>
<td>t1</td>
<td>Trash pvtThresholds. <strong><Nt 0 %%></strong> individually, <strong><Nt 1 %%></strong> for bank, <strong><Nt&nbsp;99></strong> trashes ALL pvtThresholds,  <strong><Nt&nbsp;1></strong> toggles scroll on/off.</td>
</tr>
<tr>
<td><strong><N u %%></strong></td>
<td><Nu 12></td>
<td>u12</td>
<td><strong>Undefine</strong> and disable sensor bsNo(erase coordinates). <strong><Nu 99></strong> for ALL</td>
</tr>
<tr>
<td><strong><N v [#]></strong></td>
<td><N v 1></td>
<td>v1</td>
<td><strong>Video</strong> mode(0-2) invoke webCAM with v 1, or alt webCAM with v 2. <strong>v</strong> for <strong>version</strong></td>
</tr>
<tr>
<td><strong><N&nbsp;w></strong></td>
<td>\<Nw></td>
<td>w</td>
<td><strong>Wait</strong>. Stop/start CAM imaging(flash), status sensing&amp; streaming.</td>
</tr>
<tr>
<td><strong>x &nbsp; y &nbsp; z</strong></td>
<td></td>
<td></td>
<td>Reserved for binary export for Processing 4 images</td>
</tr>
<tr>
<td><strong><N ### ## ##></strong></td>
<td><N&nbsp;711&nbsp;75&nbsp;85></td>
<td>a13,75,85</td>
<td>Note: This uses the <strong>vpin</strong> for a sensor, NOT id/bsNo.(ref. <strong>Appendix E</strong>).</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Notes:</strong> The'i' cmd prints bsNo(bsn) where bsn/vPin offsets range from(7)00 to(7)79(e.g. baseVpin address 700).<br />
Some commands return previous(old) values then update sensorCAM. Use \<Nm> to confirm change.<br />
Space after &lt;N is optional, as is capitalization of command. e.g.\<N t 42>=\<NT 42>,\<N r 00>=\<NR>
Multiple CAM selections can be achieved by config.h entry and use of a prefix on param1 e.g.<N i 212> for CAM 2
For commands to work fully, need latest <em>CamParser.cpp</em>, CS driver(<em>IO-EXSensorCAM.h</em>)\&amp; <em>sensorCAM.ino</em></p>
</blockquote>
<h2 id="appendix-e">APPENDIX E<a class="headerlink" href="#appendix-e" title="Permanent link">&para;</a></h2>
<h3 id="tabulation-of-recommended-dcc-ex-cs-ids-for-sensorcam">Tabulation of Recommended DCC-EX-CS ID's for sensorCAM<a class="headerlink" href="#tabulation-of-recommended-dcc-ex-cs-ids-for-sensorcam" title="Permanent link">&para;</a></h3>
<p><strong>Table B</strong> below shows the colour code used to identify sensors on the Processing 4 track image.<br />
For example, sensor S12 has a bsNo 1/2 for which the colours are Brown/Red (seen on sensor box edges).<br />
For CAM number 1, the full CS sensor S12 ID is 112 when used in CS native <N> commands such as <strong><N i 112></strong> 
The use of the CAM # can be optional.  If only one CAM is installed (or selected), <strong><Ni 12></strong> is sufficient.
For EXRAIL it can be tested so: <strong>AT(CAM 012)</strong> where the vpin is invisibly calculated as (700+012).
<strong>N.B.</strong> The use of the '0' after CAM is essential in EXRAIL.<br />
The colour code is the standard resistor value colour code for 0-9.</p>
<p>Under normal circumstances if the CS has been configured as per the installation instructions, there is no need to refer to the vpin of any Sensor.  They are all relative to the baseVpin of the CAM.</p>
<p>The full ID consists of CAM number #-bank-sensor or #bs. Each bank(0-9) contains 8 sensors(0-7)<br />
vPin is the (CAM number # baseVpin) + 0bs,  bsNo skips id's ending in 8 or 9.  (e.g. 700 + 012 = 710)
vPin is the base/first vPin number (e.g. 700) + DEC(bsn)number in the conversion table below.</p>
<p><img alt="Sensor Code Conversions" src="../../../_static/images/ex-sensorcam/sensor-code-conversions.png" /></p>
<p><strong>Table E &nbsp; &nbsp; Reference Sensor ID to colour code conversion table</strong></p>
<h2 id="appendix-f">APPENDIX F<a class="headerlink" href="#appendix-f" title="Permanent link">&para;</a></h2>
<h3 id="hardware-interface-notes-including-pca9515a-sparkfun-endpoints">Hardware Interface Notes (including PCA9515A&amp; Sparkfun Endpoints)<a class="headerlink" href="#hardware-interface-notes-including-pca9515a-sparkfun-endpoints" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong>Note:</strong> This Appendix focuses on the <strong>ESP32-CAM-MB</strong> implementation, but as an alternative, consider the newer ESP32 WROVER-CAM and breakout board, as mentioned in <strong>Section 7</strong>, <strong>Figure 6</strong> for a simpler implementation.</p>
</blockquote>
<p>The ESP32 CAM drives GPIO pins with 3.3V logic. This may well be incompatible with the master l2C signals at 5V. It is essential that appropriate voltage level shifting and buffering is used where necessary. Unbuffered I2C is limited in range but a cheap P82B715 bus extender gives up to 30m of I2C capability. A Sparkfun differential i2c driver/endpoint may also be used to achieve long lengths and voltage shifting (3.5v to 5v) if needed. The prototype Sensor CAM was mounted on a â€œperfâ€ board that holds two bank trip LEDs, power LED, I2C buffer, a number of required pull-up resistors, capacitors and a voltage regulator so that it can operate and be powered over a single 5m CAT5 cable for greater convenience. A 3m USB connection need only be used for setup and diagnosis. The prototype board plugs into the socket of ESP32-CAM-MB USB adaptor (with 5V pin cut off) but can also use other FTDI interfaces.</p>
<p>The CAM prototype can be Reset remotely by software or by cycling the power supply. It can be placed in program mode by a logic signal (GPIO0) over the CAT5 cable if needed, and similarly placed in WebServer mode (GPIO14) or Sensor mode remotely independent of I2C master. The GPIO0 &amp; 14 pins may be isolated from CAT5 cable with MOSFETS. The CAM MUST be rigidly mounted as it's response to any image vibration can trip sensors. It is best not moved after sensor location programming as precise realignment could be tedious. It is, however, advisable to make guides or jig arrangement to at least be able to remove (for maintenance) and return with minimal misalignment to cover the same field of view. The LED method of placing/positioning sensors may be necessary if a long USB cable is impractical. A 5m buffered USB cable might be advantageous. Even so,programming or imaging over a long USB cable may not be satisfactory.</p>
<p>One PCA9515A based module offers a simpler, but limited, interface to an i2c bus the use of will act as a level changer (3.3V to 5V) and can connect to a SHORT i2c bus (max 3m). You may use 2mm foam adhesive tape to mount a PCA9515A on the back of an ESP32-CAM-MB and solder on the 5 jumper wires directly as shown below.If the i2c length is near or just over the limit, an optional LTC4311 extender can be attached to boost the signal. As shown, this option relies on 5V USB power so needs a dedicated (permanent) USB cable connection.  A local 5v buck converter can be added beside the CAM for a better supply. You can also extend a cable between the PCA9515 buffer and CAM (2m).</p>
<p>A programmable nLED and 330ohm resistor may be attached to the PCA9515A from 3.3V VCC to GPIO14 to aid testing.</p>
<p><img alt="ESP32 CAM MB with PCA9515A and LTC4311" src="../../../_static/images/ex-sensorcam/esp32-cam-mb-with-pca9515a-ltc4311.png" /></p>
<p>Alternatively, The Sparkfun endpoint is perhaps the best overall solution at this stage for driving one (or more) sensorCAMs. It provides greater lengths of cable without extending the Command Station i2c local bus. The endpoints are used in pairs, connected by a long (&lt;100m) differential pair cat5 cable providing power and communications. It can provide buffering, level shifting and power, but care is needed at the CS end to avoid over-voltage damage. It is suggested, with a 5V CS, that the Endpoint pullup jumpers at the CS end be cut for safety. The sensorCAM Endpoint default pullups are needed for the 3.3V CAM i2c bus.The CS Endpoint requires 3.3V power(from the CS) and a separate (7 to 9V) DC supply for the Buck &amp; CAM.</p>
<p>Typical device applications (with BUCK 5V inverters):</p>
<p><img alt="Typical Mega with ESP32 CAM" src="../../../_static/images/ex-sensorcam/typical-mega-esp32-cam.png" /></p>
<p>Sparkfun endpoints(requires a matching sparkfun endpoint at CS)(CS interface option B)</p>
<p><img alt="Typical Application with Buck Converter" src="../../../_static/images/ex-sensorcam/typical-application-buck-converter.png" /></p>
<p>(Dual optional) CAM wiring with Endpoints and 5V Buck reg. powered over GRN-GRNW(Vin) with Vin(&gt;7V)</p>
<p>There are three basic variations below for connecting the Endpoints to the CS. The choice depends on the current system being extended. Options A &amp; B(not recommended) apply to a 5Volt I2C bus on a 5V CS with or without existing I2C accessory connections, while Option C is the simplest connection to a 3.3Volt CS (e.g. CSB1) i2c bus.</p>
<p>The 2x Endpoints require about  10mA  each. All options can be adapted for use with a mux if necessary. The choice between A and B depends on the power supplies available. If the CS Endpoint is to be tapped into a "remote" 5V i2c bus location, a CS 3.3V supply may not be available, only a 5V I2C supply. Option B (not recommended) removes one 10k pullup resistor pair from the bus to avoid inappropriate pull-up voltage(3.3V).</p>
<p><strong>Option A:</strong> CUT CAM endpoint jumper 0-1 and supply 5V and 3.3V from the CS. Option A connections results in a 5V i2c interface to 3.3V differential cable for 5V microprocessor based CS (e.g. Mega).</p>
<p><strong>Option C:</strong> used with newer (32bit) MPU's (e.g. CSB1) &amp; uses 3V3 throughout. No Endpoint jumpers need to be cut. Whichever option is used, the user should consider if the I2C bus needs to be tuned differently. For very short extra cable length to the Endpoint and only one extra device count on an I2C bus under 1m in length, tuning may be unnecessary. In marginal conditions consider returning as per DCC-EX recommendations.</p>
<h4 id="a-for-33v-differential-drive-5v-cs-i2c-bus">A FOR 3.3V Differential drive 5V CS I2C BUS<a class="headerlink" href="#a-for-33v-differential-drive-5v-cs-i2c-bus" title="Permanent link">&para;</a></h4>
<p><img alt="Differential Drive 5V CS" src="../../../_static/images/ex-sensorcam/differential-drive-5v-cs.png" /></p>
<h4 id="c-for-33v-differential-drive-33v-cs-i2c-bus">C FOR 3.3V Differential drive 3.3V CS I2C BUS<a class="headerlink" href="#c-for-33v-differential-drive-33v-cs-i2c-bus" title="Permanent link">&para;</a></h4>
<p><img alt="Differential Drive 3.3V Only CS" src="../../../_static/images/ex-sensorcam/differential-drive-3v3-only-cs.png" /></p>
<h2 id="appendix-h">APPENDIX H<a class="headerlink" href="#appendix-h" title="Permanent link">&para;</a></h2>
<h3 id="notes-on-use-of-ex-rail-with-sensorcam">Notes on use of EX-RAIL with sensorCAM<a class="headerlink" href="#notes-on-use-of-ex-rail-with-sensorcam" title="Permanent link">&para;</a></h3>
<h3 id="1-sensorvpin-numbering">1. Sensor/vpin Numbering<a class="headerlink" href="#1-sensorvpin-numbering" title="Permanent link">&para;</a></h3>
<p>The numbering of sensors can be consecutive by vPin, which is the common practice with multi-pin peripherals (e.g. PCA9685 16-channel Servo driver and MCP23017 16-channel GPIO Expander). Sequential vPin numbers within a device is hardware enforced, but this loses some of the advantages available by a more meaningful ID notation. Such ID's are available for jmri use and so can also be used for sensorCAM. Use of IDs, as suggested below, can remove any need to program with vPin numbers.</p>
<p>For any peripheral device, the vPin is needed for commands (e.g.700+5), but, if predefined (e.g. in config.h), alphanumeric names such as CAM or CAM2 or ESSEX can be used in place of the base vPin to identify the camera. Then commands for CAM pin 5 become: e.g. AT(CAM 05) or AT(ESSEX 05)</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span><span class="w">  </span>
<span class="w"> </span><span class="cp">#define SENSORCAM_VPIN &amp;nbsp; 700 &amp;nbsp; &amp;nbsp; </span><span class="c1">//place in config.h or myAutomation.h or mysetup.h  </span>
<span class="w"> </span><span class="cp">#define CAM &amp;nbsp; SENSORCAM_VPIN+ &amp;nbsp; &amp;nbsp; </span><span class="c1">//in config.h or myAutomation.h or mysetup.h  </span>

<span class="w"> </span><span class="n">Valid</span><span class="w"> </span><span class="n">EXRAIL</span><span class="w"> </span><span class="n">commands</span><span class="o">:</span><span class="w"> </span><span class="n">AFTER</span><span class="p">(</span><span class="n">CAM</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="n">AT</span><span class="p">(</span><span class="n">SENSORCAM_VPIN</span><span class="o">+</span><span class="mi">7</span><span class="p">)</span><span class="n">IFGTE</span><span class="p">(</span><span class="n">CAM</span><span class="w"> </span><span class="mo">010</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">  </span>

<span class="w"> </span><span class="n">To</span><span class="w"> </span><span class="n">avoid</span><span class="w"> </span><span class="n">frequent</span><span class="err">â€œ</span><span class="n">CAM</span><span class="err">â€</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">scripts</span><span class="p">,</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">alias</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">assigned</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span><span class="w"> </span><span class="n">ALIAS</span><span class="p">(</span><span class="n">ESSEX_P1</span><span class="p">,</span><span class="w"> </span><span class="n">CAM</span><span class="o">+</span><span class="mh">0x10</span><span class="p">)</span>
</code></pre></div>
<p>With each sensorCAM having up to 80 sensors, it is desirable to test groups of (1 to 8) sensors with a single EXRAIL test using the <strong>IFGTE()</strong> or <strong>IFLE()</strong> commands. To do this, the sensors are logically arranged in â€œbanksâ€ of (consecutive) vpins. The logical grouping available can be written in the form â€œbsâ€ or b/s where b can have bank values of 0-9 (10 banks) and s values 0-7 (8 sensors). <strong>IFGTE</strong> and <strong>IFLT</strong> read a whole bankâ€œvalueâ€. Native CAM commands can also be issued e.g. <strong>PARSE(â€œ<N b 4>â€)</strong> for bank 4.</p>
<p>EXRAIL can accept â€œb/sâ€ numbering (e.g. 047) if we add the leading 0. e.g. vpin= <strong>SENSORCAM_VPIN+ 047</strong> e.g. <strong>IFGTE(CAM 047,1)</strong> provided values are defined for <strong>SENSORCAM_VPIN</strong> &amp; <strong>CAM</strong>(as above).</p>
<p><strong>(N.B. â€œCAMâ€ includes the â€˜+â€™)</strong> Using this method there is no need to remember assigned vPin values!</p>
<p><strong>Example 1:</strong> For the approach to a signal, several sensors may be deployed (say S13 to S17) with S17 last at the signal. As a train approaches the signal, the (bank) â€œvalueâ€ of the tripping sensors will increase. This can be used to control the loco speed for a smooth and precise stop at a platform for example.<br />
Commands <strong>IFGTE(CAM 013,8) SPEED(40)</strong>... <strong>IFGTE(CAM 013,16)</strong> <strong>SPEED(30)</strong> etc. can be used to control the loco approach speed with some precision.<br />
Finally, at the signal(S17), <strong>IFGTE(CAM 013,128) STOP</strong></p>
<p>Aliases could also be defined and used for station/bank or line sensors. e.g.IFGTE(TRENTHAM, 0x80)</p>
<p><strong>Example 2:</strong> The CAM can have up to 10 occupation/line detectors. If twoâ€œlinearâ€ line sensors are needed, and we have bank 1 allocated (S10-S17), the following 16 vPins could be assigned to 2 banks of linear sensors. We can use (bs#) ID of 20 to 27 for first linear sensor (bank2) and 30-37 of bank3. The Command Station can easily handle banks of 8, using an ID based format of (CAM 020) and (CAM 030). The â€œbankâ€ or b/s notation requires the leading â€˜0â€™ on the bsNo. for automatic vpin calculation. The linear segments at S21 to S27 may also be tested individually and a common bank threshold can be set if needed. e.g. <strong>IFGTE(CAM 020,1)</strong>...// bank occupied, or <strong>IFGTE(CAM 024,16)</strong> &nbsp; //2nd half occupied.</p>
<p>Note: With â€˜0%%â€™ notation, unless you understand the issue, avoid using bank 8 &amp; 9 as mistakes may arise. (08# must be expressed as 010# and 09# as 011# for correct outcome)</p>
<h3 id="2-multiple-cams">2. Multiple Cams<a class="headerlink" href="#2-multiple-cams" title="Permanent link">&para;</a></h3>
<p>Multiple sensorCAMs can be easily handled if CAM2, CAM3 etc are defined along the lines of CAM above, so <strong>IF(CAM2 012)</strong> tests a different sensor to <strong>IF(CAM3 012)</strong>, provided <strong>SENSORCAM2_ VPIN</strong> etc. are defined. Using CS native commands, e.g. <strong><Ni 212></strong> and <strong><Ni 312></strong>, can also access <strong>S12</strong> on different CAMs. <strong>The #define SENSORCAM_VPIN ###</strong> is essential for cam1. Do NOT insert a 1 in to <strong>SENSORCAM_VPIN</strong>. You may use <strong>SENSORCAM2_VPIN</strong> and <strong>SENSORCAM3_VPIN</strong> with <strong>CAM2</strong> and <strong>CAM3</strong> in <em>config.h</em></p>
<h2 id="appendix-j">APPENDIX J<a class="headerlink" href="#appendix-j" title="Permanent link">&para;</a></h2>
<h3 id="esp32-cam-pinout-v16-and-wrover-cam-notes">ESP32-CAM pinout (v1.6) and WROVER-CAM notes.<a class="headerlink" href="#esp32-cam-pinout-v16-and-wrover-cam-notes" title="Permanent link">&para;</a></h3>
<p><img alt="ESP32 CAM Pinout Reference" src="../../../_static/images/ex-sensorcam/esp32-cam-pinout-reference.png" /></p>
<p>N.B. CAM v1.6 has 4x jumpers (cam side) near U0R/U0T pins &amp; CAM v1.9 has 6x jumpers (including RST)</p>
<p>In board version v1.9, the "GND" pin adjacent GPIO1/U0T is used for RESET(GND/R) to ESP32-CAM and MUST NOT be tied to GND or CAM will remain in RESET mode.</p>
<p><strong>Identification:</strong> ESP32-CAM v1.6 has 4x jumpers beside UOR/UOT pins and v1.9 has 6x jumpers (inc. Reset).</p>
<p>Using v1.6 with no RTS/DTR reset, users will have to boot up holding IO0 button in to get into programming mode. MB boards are sold mostly without headers and can come with either Type-C or micro-B in either size, 1 or 2 button.</p>
<h3 id="1-note-on-i2c-clock-frequency">1 Note on i2c clock frequency<a class="headerlink" href="#1-note-on-i2c-clock-frequency" title="Permanent link">&para;</a></h3>
<p>The newer sensorCAM drivers default to an i2c bus frequency of 100,000 Hz. With caution, this may be increased somewhat (e.g. 200000) if the i2c bus is well tuned and all attached devices can handle higher frequencies. To set a higher frequency, for example, place the following in mySetup.h or myHal.cpp I2Cmanager.forceClock(200000); //place after void halSetup()</p>
<h3 id="2-notes-on-40-pin-wrover-cam-and-38-pin-breakout-board">2. Notes on 40-pin WROVER CAM and 38-pin breakout board<a class="headerlink" href="#2-notes-on-40-pin-wrover-cam-and-38-pin-breakout-board" title="Permanent link">&para;</a></h3>
<p>Potentially simplest commercially available hookup for 40 pin WROVER-CAM:</p>
<p>Software configuration: add #define CAMERA_MODEL_WROVER_KIT to bottom of configCAM.h</p>
<p>2xâ€œSpareâ€ (USB end) Vcc and GND pins not used with the 38 pin breakout board shown. (remove?)</p>
<p>Adding 1.0uF capacitor between reset (EN) pin and gnd ensures more reliable power-on reset.</p>
<p>Add a super-bright green LED and 330R from 3.3V to GPIO14 for programmable LED indicator.</p>
<p>There is no white â€œflashâ€ LED but, in sensorCAM mode, the on-board blue LED flashes instead. (GPIO2)</p>
<p>The breakout board USB connectors are for an optional 5V power source ONLY. No comm's.</p>
<p>Limit Vin barrel jack to 7-10V max to avoid destruction of the 1117C 5V regulator. (Vne= 16V)</p>
<p>The CS endpoint shown should be powered with 3.3V from the CS end (NOT 5V), and 9V on GRNW/GRN<br />
Note: WROVER-CAM does not have a fitted external antenna socket like the ESP32-CAM.</p>
<p><img alt="ESP32 Wrover CAM with Sparkfun Endpoint" src="../../../_static/images/ex-sensorcam/esp32-wrover-sparkfun-endpoint.png" /></p>
<p>For a limited reach, perhaps using a LTC4311 terminator/buffer at the CS to boost signal rise times and range, the cheaper PCA9515A may be used with the Wrover-CAM connected as below.  The wires from PCA9515A to the CAM can be up to 2m long (with extra pullups) using twisted pairs (cat5?).</p>
<p><img alt="ESP32 Wrover CAM with PCA9515A" src="../../../_static/images/ex-sensorcam/esp32-wrover-pca9515a.png" /></p>
<h3 id="3-note-on-enhanced-t-command-for-handlingclearing-pvtthresholds-version-v319">3. Note on enhanced 't' command for handling/clearing pvtThresholds (version v319+):<a class="headerlink" href="#3-note-on-enhanced-t-command-for-handlingclearing-pvtthresholds-version-v319" title="Permanent link">&para;</a></h3>
<p><strong>t0,%%</strong> will cancel a <em>pvtThreshold</em> on S%% as always.<br />
<strong>t1,%%</strong> will cancel ALL pvtThresholds in bank% e.g.t1,30<br />
<strong>t1,99</strong> will cancel ALL pvtThresholds in the sensorCAM(i.e.S00 to S97)<br />
<strong>t99</strong> will list ALL pvtThresholds in the sensorCAM by bank#(10 banks)<br />
<strong>t1</strong> will toggle SCROLL ON/OFF as always. The'<strong>e</strong>' command is needed to make changes"permanent"</p>
<p>Version v319 also accepts minSensors up to maxSensors-1<br />
<strong>m#,%%</strong> will set maxSensors to%%. e.g. m10,30 sets maxSensors=030 (leaving min2trip unchanged as does m0,30)<br />
<strong>n#,%%</strong> will set minSensors to%%. e.g. n10,27 sets minSensors=027 leaving nLED unchanged. n0,27 would set nLED to 0)</p>
<h3 id="additional-random-notes">ADDITIONAL RANDOM NOTES:<a class="headerlink" href="#additional-random-notes" title="Permanent link">&para;</a></h3>
<p>ALL FOLLOWING IMAGES ARE FOR GENERAL INFORMATION ONLY&amp; NOT DIRECTLY REFERENCED IN THE FULL MANUAL ABOVE</p>
<p><img alt="ESP32 CAM MB v1.6 vs v1.9" src="../../../_static/images/ex-sensorcam/esp32-cam-mb-16-19.png" /></p>
<p><img alt="ESP32 CAM Closeup 1" src="../../../_static/images/ex-sensorcam/esp32-cam-closeup-1.png" /></p>
<p><img alt="ESP32 CAM Closeup 2" src="../../../_static/images/ex-sensorcam/esp32-cam-closeup-2.png" /></p>
<p><img alt="ESP32 CAM Closeup 3" src="../../../_static/images/ex-sensorcam/esp32-cam-closeup-3.png" /></p>
<p><img alt="ESP32 CAM Closeup 4" src="../../../_static/images/ex-sensorcam/esp32-cam-closeup-4.png" /></p>
<p><img alt="ESP32 Cam with Capacitor" src="../../../_static/images/ex-sensorcam/esp32-cam-with-capacitor.png" /></p>
<h3 id="acceptable-alt-wrover-cam">Acceptable alt. WROVER CAM<a class="headerlink" href="#acceptable-alt-wrover-cam" title="Permanent link">&para;</a></h3>
<p><img alt="ESP32 Wrover CAM" src="../../../_static/images/ex-sensorcam/esp32-wrover-cam.png" /></p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="December 12, 2025 00:10:17 UTC">December 12, 2025</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        


<footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../03-ex-sensorcam-command-reference/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Native EX-SensorCAM Command List">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Native EX-SensorCAM Command List
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2025 <a href="https://dcc-ex.com/" target="_blank" rel="noopener">DCC-EX</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://discord.gg/y2sB4Fp" target="_blank" rel="noopener" title="Join us on Discord" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.select", "content.code.copy", "content.code.annotate", "content.tooltips", "header.autohide", "navigation.footer", "navigation.tabs", "navigation.top", "navigation.tracking", "navigation.indexes", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../../_static/scripts/search-helper.js"></script>
      
        <script src="../../../_static/scripts/platform.js"></script>
      
        <script src="../../../_static/scripts/ex-installer-run-helper.js"></script>
      
        <script src="../../../_static/scripts/clickable-cards.js"></script>
      
        <script src="../../../_static/scripts/legacy-docs-new-tab.js"></script>
      
        <script src="../../../js/open_in_new_tab.js"></script>
      
    
  </body>
</html>